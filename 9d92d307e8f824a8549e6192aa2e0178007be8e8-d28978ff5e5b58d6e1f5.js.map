{"version":3,"file":"9d92d307e8f824a8549e6192aa2e0178007be8e8-d28978ff5e5b58d6e1f5.js","mappings":"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","sources":["webpack://myweb3course/./src/components/content-editable/content-editable.js","webpack://myweb3course/./src/components/context/projects/project-data-context.js","webpack://myweb3course/./src/components/context/reviews/review-data-context.js","webpack://myweb3course/./src/components/reviews/my-reviews-summary.js","webpack://myweb3course/./src/components/reviews/project-reviews-summary.js","webpack://myweb3course/./src/components/quote/quote.js","webpack://myweb3course/./src/components/reviews/review-card.js","webpack://myweb3course/./src/components/spinner/spinner.js","webpack://myweb3course/./src/utils/api/fetch.js","webpack://myweb3course/./src/utils/auths/use-id-token.js","webpack://myweb3course/./src/utils/string/string.js"],"sourcesContent":["import React, { useState } from 'react';\nimport he from 'he';\n\n/**\n * Make a div editable with text (could also be some HTML if needed).\n * @param {startContent} String to be used when the content is being updated\n * @param {children} React elements to be used when the content is not being updated\n * @returns\n */\n\nconst ContentEditable = ({\n  className,\n  isBeingEdited,\n  onChange,\n  startContent,\n  id,\n  isInline,\n  children,\n}) => {\n  //const [content, setContent] = useState(startContent);\n\n  const handleChange = (e) => {\n    const propUpdated = {};\n    propUpdated[id] = e.currentTarget.textContent;\n    // set state at parent level\n    onChange(propUpdated);\n  };\n\n  let currentContent;\n  if (isBeingEdited)\n    currentContent = startContent\n      ? he.decode(startContent)\n      : ''; \n  else if (children) currentContent = children;\n  else if (startContent)\n    currentContent = startContent ? he.decode(startContent) : '';\n\n  let allClasses;\n  allClasses = className ? className : '';\n  if (isBeingEdited)\n    allClasses += ' index__card__content__description--is-being-edited';\n  if (isInline) allClasses += ' index__card__content__description--is-inline';\n\n  return (\n    <div\n      className={allClasses}\n      contentEditable={isBeingEdited ? true : false}\n      onInput={handleChange}\n      suppressContentEditableWarning={true}\n    >\n      {currentContent}\n    </div>\n  );\n};\n\nexport default ContentEditable;\n","import React, { useContext, useState } from 'react';\nimport callAPI from '../../../utils/api/fetch';\nimport { useMsal } from '@azure/msal-react';\nimport { getAsyncIdToken } from '../../../utils/auths/use-id-token';\n\nconst ProjectDataContext = React.createContext([\n  {},\n  () => {},\n  {},\n  () => {},\n  {},\n  () => {},\n  {},\n  () => {},\n]);\n\nconst ProjectDataProvider = ({ children }) => {\n  const [projectGroupData, setProjectGroupData] = useState(undefined);\n  const [userData, setUserData] = useState(undefined);\n  const [projectData, setProjectData] = useState(undefined);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  return (\n    <ProjectDataContext.Provider\n      value={[\n        projectGroupData,\n        setProjectGroupData,\n        userData,\n        setUserData,\n        projectData,\n        setProjectData,\n        isLoaded,\n        setIsLoaded,\n      ]}\n    >\n      {children}\n    </ProjectDataContext.Provider>\n  );\n};\n\nconst useProjectData = () => {\n  const { instance, accounts } = useMsal();\n\n  const [\n    projectGroupData,\n    setProjectGroupData,\n    userData,\n    setUserData,\n    projectData,\n    setProjectData,\n    isLoaded,\n    setIsLoaded,\n  ] = useContext(ProjectDataContext);\n\n  const updateProjectGroupData = async (associatedProjectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const tempProjectGroup = await callAPI(\n        `projectgroups/${associatedProjectGroupName}`,\n        'get',\n        idToken,\n        undefined\n      );\n      setProjectGroupData(tempProjectGroup);\n      console.log('STATE NOW ????', tempProjectGroup);\n      return tempProjectGroup;\n    } catch (err) {\n      console.error('useProjectData:error:', err);\n    }\n  };\n\n  const updateUserData = async (associatedProjectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const tempUser = await callAPI(\n        `users/role/?projectgroupname=${associatedProjectGroupName}`,\n        'get',\n        idToken,\n        undefined\n      );\n      setUserData(tempUser);\n      return tempUser;\n    } catch (err) {\n      console.error('useProjectData:updateUserData:error:', err);\n    }\n  };\n\n  const updateProjectData = async (projectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      setIsLoaded(false);\n      let tempProject = await callAPI(\n        'projects/projectgroups/' + projectGroupName,\n        'get',\n        idToken,\n        undefined\n      );\n      setProjectData(tempProject);\n      console.log('project array updated', tempProject);\n      setIsLoaded(true);\n      return tempProject;\n    } catch (err) {\n      console.error('useProjectData:updateProjectDataerror:', err);\n    }\n  };\n\n  /**\n   * Add one project to an existing projectGroupName !\n   * @param {*} projectGroupName\n   */\n  const addOneProject = async (projectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const newProject = await callAPI('projects', 'post', idToken, {\n        projectGroupName,\n      });\n      //return await updateProjectData(projectGroupName);\n      return newProject;\n    } catch (err) {\n      console.error('useProjectData:addOneProject:error:', err);\n    }\n  };\n\n  const deleteOneProject = async (project) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const deletedProject = await callAPI(\n        'projects/' + project._id,\n        'DELETE',\n        idToken,\n        undefined\n      );\n      //return await updateProjectData(projectGroupName);\n      return deletedProject;\n    } catch (err) {\n      console.error('useProjectData:deleteOneProject:error:', err);\n    }\n  };\n\n  const addMemberToProject = async (project) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const projectUpdated = await callAPI(\n        'projects/' + project._id + '/member',\n        'POST',\n        idToken,\n        undefined\n      );\n\n      return projectUpdated;\n    } catch (err) {\n      console.error('useProjectData:addMemberToProject:error:', err);\n    }\n  };\n\n  const deleteMemberFromProject = async (project) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const projectUpdated = await callAPI(\n        'projects/' + project._id + '/member',\n        'DELETE',\n        idToken,\n        undefined\n      );\n\n      return projectUpdated;\n    } catch (err) {\n      console.error('useProjectData:deleteMemberFromProject:error:', err);\n    }\n  };\n\n  const updateProject = async (data, id) => {\n    console.log('project to be updated:', data);\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const projectUpdated = await callAPI(\n        'projects/' + id,\n        'PATCH',\n        idToken,\n        data\n      );\n\n      console.log('project updated:', projectUpdated);\n      return projectUpdated;\n    } catch (err) {\n      console.error('useProjectData:updateProject:error:', err);\n    }\n  };\n\n  return {\n    ...{\n      projectGroupData,\n      updateProjectGroupData,\n      userData,\n      updateUserData,\n      projectData,\n      updateProjectData,\n      addOneProject,\n      deleteOneProject,\n      addMemberToProject,\n      deleteMemberFromProject,\n      updateProject,\n      isLoaded,\n      setIsLoaded,\n    },\n  };\n};\n\nexport { ProjectDataProvider, useProjectData };\n","import React, { useContext, useState } from \"react\";\nimport callAPI from \"../../../utils/api/fetch\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { getAsyncIdToken } from \"../../../utils/auths/use-id-token\";\n\nconst ReviewDataContext = React.createContext([\n  {},\n  () => {},\n  {},\n  () => {},\n  false, // isLoaded = false by default\n  () => {},\n]);\n\nconst ReviewDataProvider = ({ children }) => {\n  const [myReviewSummaryData, setMyReviewSummaryData] = useState(undefined);\n  const [allReviewsData, setAllReviewsData] = useState(undefined);\n  const [myReviewsData, setMyReviewsData] = useState(undefined);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  return (\n    <ReviewDataContext.Provider\n      value={[\n        myReviewSummaryData,\n        setMyReviewSummaryData,\n        allReviewsData,\n        setAllReviewsData,\n        myReviewsData,\n        setMyReviewsData,\n        isLoaded,\n        setIsLoaded,\n      ]}\n    >\n      {children}\n    </ReviewDataContext.Provider>\n  );\n};\n\nlet updateOperationCount = 0;\n\nconst useReviewData = () => {\n  const { instance, accounts } = useMsal();\n\n  const [\n    myReviewSummaryData,\n    setMyReviewSummaryData,\n    allReviewsData,\n    setAllReviewsData,\n    myReviewsData,\n    setMyReviewsData,\n    isLoaded,\n    setIsLoaded,\n  ] = useContext(ReviewDataContext);\n\n  const updateMyReviewSummaryData = async (userName, projectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const myReviewSummary = await callAPI(\n        `reviews/users/${userName}/projectgroups/${projectGroupName}/count`,\n        \"get\",\n        idToken,\n        undefined\n      );\n      setMyReviewSummaryData(myReviewSummary);\n\n      return myReviewSummary;\n    } catch (err) {\n      console.error(\"useReviewData:updateMyReviewSummaryData:error:\", err);\n    }\n  };\n\n  const updateMyReviewsData = async (userName, projectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      if (updateOperationCount === 0) setIsLoaded(false);\n      updateOperationCount++;\n      const myReviews = await callAPI(\n        `reviews/users/${userName}/projectgroups/${projectGroupName}`,\n        \"get\",\n        idToken,\n        undefined\n      );\n      setMyReviewsData(myReviews);\n      updateOperationCount--;\n      if (updateOperationCount === 0) setIsLoaded(true);\n      return myReviews;\n    } catch (err) {\n      console.error(\"useReviewData:updateMyReviewsData:error:\", err);\n    }\n  };\n\n  const updateAllReviewsData = async (projectGroupName) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      if (updateOperationCount === 0) setIsLoaded(false);\n      updateOperationCount++;\n      const allReviews = await callAPI(\n        `reviews/projectgroups/${projectGroupName}/summary`,\n        \"get\",\n        idToken,\n        undefined\n      );\n      setAllReviewsData(allReviews);\n      updateOperationCount--;\n      if (updateOperationCount === 0) setIsLoaded(true);\n      return allReviews;\n    } catch (err) {\n      console.error(\"useReviewData:updateAllReviewsData:error:\", err);\n    }\n  };\n\n  const updateExpectedProjectReview = async (data, id) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const reviewUpdated = await callAPI(\n        \"reviews/\" + id,\n        \"PATCH\",\n        idToken,\n        data\n      );\n\n      return reviewUpdated;\n    } catch (err) {\n      console.error(\"useReviewData:updateProjectReview:error:\", err);\n    }\n  };\n\n  const createFreeProjectReview = async (data, id) => {\n    try {\n      const idToken = await getAsyncIdToken(accounts, instance);\n      const newReview = await callAPI(\"reviews\", \"POST\", idToken, {\n        ...data,\n        projectId: id,\n      });\n\n      return newReview;\n    } catch (err) {\n      console.error(\"useReviewData:createFreeProjectReview:error:\", err);\n    }\n  };\n\n  return {\n    ...{\n      myReviewSummaryData,\n      updateMyReviewSummaryData,\n      allReviewsData,\n      updateAllReviewsData,\n      myReviewsData,\n      updateMyReviewsData,\n      updateExpectedProjectReview,\n      createFreeProjectReview,\n      isLoaded,\n      setIsLoaded,\n    },\n  };\n};\n\nexport { ReviewDataProvider, useReviewData };\n","import React from \"react\";\nimport { Link, useStaticQuery } from \"gatsby\";\nimport YoutubeImage from \"../image/youtube-image.js\";\nimport ReviewCard from \"./review-card\";\nimport he from \"he\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart, faComment } from \"@fortawesome/free-solid-svg-icons\";\n\nconst MyReviewsSummary = ({ myReviewsSummary }) => {\n  if (!myReviewsSummary) return null;\n\n \n\n  return (\n    <div className=\"card card--dark-summary card--fill-wrapper\">\n      <div className=\"card__header\">Résumé de mes revues</div>\n\n      <div className=\"card__content card__content--long-titles\">\n        <div className=\"card__content__title\">Coups de coeurs disponibles</div>\n        <div className=\"card__content__description\">\n          <FontAwesomeIcon icon={faHeart} />\n          <span className=\"text--light\">{myReviewsSummary.availableLike}</span>\n        </div>\n\n        <div className=\"card__content__title\">Revues attendues</div>\n        <div className=\"card__content__description\">\n          <FontAwesomeIcon icon={faComment} className=\"card__content--orange\"/>\n          <span className=\"text--light\">{myReviewsSummary.expectedReviews}</span>\n        </div>\n\n        <div className=\"card__content__title\">Revues terminées</div>\n        <div className=\"card__content__description\">\n          <FontAwesomeIcon icon={faComment} />\n          <span className=\"text--light\">{myReviewsSummary.alreadyReviewed}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MyReviewsSummary;\n","import React from \"react\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart, faComment } from \"@fortawesome/free-solid-svg-icons\";\n\nconst ProjectReviewsSummary = ({ project }) => {\n  if (!project) return null;\n\n  return (\n    <div className=\"counter\">\n      <div className=\"\">\n        <FontAwesomeIcon icon={faHeart} className=\"counter__symbol counter__symbol--red\" />\n        <span className=\"text--light\">{project.countLiked}</span>\n      </div>\n\n      <div className=\"\">\n        <FontAwesomeIcon icon={faComment} className=\"counter__symbol counter__symbol--orange\" />\n        <span className=\"text--light\">{project.countExpected}</span>\n      </div>\n\n      <div className=\"\">\n        <FontAwesomeIcon icon={faComment} className=\"counter__symbol counter__symbol--green\" />\n        <span className=\"text--light\">{project.countReviews}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectReviewsSummary;\n","import React from \"react\";\nconst Quote = ({ content, author }) => {\n  return (\n    <div className=\"quote quote--close-to-others\">\n        <div className=\"quote__content quote__content--dark-and-wide\">\n      <q>{content}</q>\n      <br />\n      <i>\n        <small className=\"text--hand-written\">- {author}</small>\n      </i>\n      </div>\n    </div>\n  );\n};\nexport default Quote;\n\n\n/*\n\n<q>{content}</q>\n      <br />\n      <i>\n        <small className=\"text--hand-written\">- {author}</small>\n      </i>\n      */","import React, { useState, useRef, useEffect } from \"react\";\nimport YoutubeImage from \"../image/youtube-image.js\";\nimport he from \"he\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faEye,\n  faMinusCircle,\n  faSave,\n  faTimes,\n  faCommentDots,\n  faTimesCircle,\n  faCheckCircle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { getNamesFromEmail } from \"../../utils/string/string\";\nimport { useProjectData } from \"../context/projects/project-data-context\";\nimport ContentEditable from \"../content-editable/content-editable.js\";\nimport ProjectReviewsSummary from \"./project-reviews-summary.js\";\nimport { useReviewData } from \"../context/reviews/review-data-context.js\";\nimport Quote from \"../quote/quote.js\";\n\nconst ReviewCard = ({ project, setFilteredContents }) => {\n  const { accounts } = useMsal();\n  const userName = accounts?.[0].username; //getUserName(); SEE IF EXISTS !!!\n\n  let userReview;\n  // get the associated review of the authenticated user (from my reviews)\n  if (project.praise !== undefined) userReview = project;\n  // get the eventual associated review of the authenticated user (from all reviews)\n  else if (project.projectReviews && project.projectReviews.length > 0) {\n    userReview = project.projectReviews.find(\n      (element) => element.userName === userName\n    );\n  }\n\n  const [isBeingEdited, setIsBeingEdited] = useState(false);\n  const [like, setLike] = useState(userReview ? userReview.like : false);\n  const [projectUpdateState, setProjectUpdateState] = useState({});\n  const [isDetailed, setIsDetailed] = useState(false);\n\n  const detailedElementRef = useRef(null);\n\n  // Scroll to the element that is detailed or that is put back without details\n  useEffect(() => {\n    if (detailedElementRef.current && isDetailed) {\n      detailedElementRef.current.scrollIntoView();\n    }\n  }, [isDetailed]);\n\n  // Get state management functions from the provider\n  const {\n    userData,\n    //projectGroupData,\n    //projectData,\n  } = useProjectData();\n\n  const {\n    updateExpectedProjectReview,\n    createFreeProjectReview,\n    updateAllReviewsData,\n    updateMyReviewSummaryData,\n    updateMyReviewsData,\n    myReviewSummaryData,\n  } = useReviewData();\n\n  // Deal with events\n\n  const onProjectUpdateRequest = () => {\n    setIsBeingEdited(true);\n  };\n\n  const onQuitProjectUpdateRequest = () => {\n    setIsBeingEdited(false);\n    // clear the update state\n    setProjectUpdateState({});\n  };\n\n  const onProjectSave = async () => {\n    /* save the updated state via the API only if :\n    the state object is not empty\n    each expected state property exists OR is given in the props*/\n    if (Object.keys(projectUpdateState).length === 0) return;\n\n    if (!projectUpdateState.praise && (!userReview || !userReview.praise))\n      return;\n\n    if (\n      !projectUpdateState.notImpressed &&\n      (!userReview || !userReview.notImpressed)\n    )\n      return;\n\n    /*\n    Determine if it's the update of an expected review or if it is\n    the creation of a new review :\n    */\n\n    let updatedProject;\n    if (userReview) {\n      updatedProject = await updateExpectedProjectReview(\n        projectUpdateState,\n        userReview._id\n      );\n    } else {\n      updatedProject = await createFreeProjectReview(\n        projectUpdateState,\n        project._id\n      );\n    }\n    // clear the project update state\n    setProjectUpdateState({});\n    setIsBeingEdited(false);\n    // update all review state to re-render\n    if (updatedProject) {\n      await updateAllReviewsData(project.projectGroupName);\n      await updateMyReviewSummaryData(\n        userData.userName,\n        project.projectGroupName\n      );\n      await updateMyReviewsData(userData.userName, project.projectGroupName);\n      setFilteredContents(undefined);\n    }\n    // }\n  };\n\n  const onViewDetails = () => {\n    setIsDetailed(true);\n  };\n\n  const onQuitViewDetails = () => {\n    setIsDetailed(false);\n  };\n\n  // deal with modification of content\n  const handleChange = (propChanged) => {\n    // update the projectState\n    setProjectUpdateState((previousState) => {\n      return { ...previousState, ...propChanged };\n    });\n  };\n\n  const onSetLike = (e) => {\n    setLike(!like);\n    setProjectUpdateState({\n      ...projectUpdateState,\n      ...{ like: !like },\n    });\n  };\n\n  if (!project) return null;\n\n  return (\n    <div\n      className={\n        \"index__card\" +\n        (isBeingEdited\n          ? \" index__card--is-being-edited\"\n          : \"\" + (isDetailed ? \" index--long-text\" : \"\"))\n      }\n      ref={detailedElementRef}\n    >\n      <div className=\"index__card__header\">\n        <span>\n          {\"Projet N° \" + project.shortId + \" : \" + he.decode(project.name)}\n        </span>\n      </div>\n\n      <div className=\"index__card__header\">\n        <ProjectReviewsSummary project={project} />\n      </div>\n\n      <div className=\"index__card__description\">\n        {\n          /* ADD REVIEW : visible only if         \n          the username is not part of the projectMembers AND\n          the review is not being edited    AND\n          the review is not detailed                \n          */\n\n          !project.projectMembers.includes(userName) &&\n          !isBeingEdited &&\n          !isDetailed ? (\n            <FontAwesomeIcon\n              icon={faCommentDots}\n              onClick={onProjectUpdateRequest}\n            />\n          ) : (\n            \"\"\n          )\n        }\n\n        {\n          /*SAVE PROJECT : Visible only if :\n        project is being edited       \n        */\n          isBeingEdited && (\n            <FontAwesomeIcon icon={faSave} onClick={onProjectSave} />\n          )\n        }\n\n        {\n          /*QUIT PROJECT UPDATE: Visible only if :\n        project is being edited       \n        */\n          isBeingEdited && (\n            <FontAwesomeIcon\n              icon={faTimes}\n              onClick={onQuitProjectUpdateRequest}\n            />\n          )\n        }\n\n        {\n          /*VIEW PROJECT REVIEWS DETAILED : Visible only if :\n        project is not being edited AND\n        project is not detailed AND \n        the user has no more expected reviews    \n        */\n          !isBeingEdited &&\n            !isDetailed &&\n            myReviewSummaryData &&\n            myReviewSummaryData.expectedReviews === 0 && (\n              <FontAwesomeIcon icon={faEye} onClick={onViewDetails} />\n            )\n        }\n\n        {\n          /*QUIT PROJECT REVIEWS DETAILED: Visible only if :\n        project is detailed      \n        */\n          isDetailed && (\n            <FontAwesomeIcon icon={faTimes} onClick={onQuitViewDetails} />\n          )\n        }\n      </div>\n\n      {/* Deal with telling if the project is reviewed. :\n        Tell that the review is impossible if the user is a member of this project \n        else\n        if there is no praise given, tell that the reviewed is not done\n        else tell that the review is done*/}\n\n      <div className=\"index__card__content\">\n        <div className=\"index__card__content__title\">Ma revue ?</div>\n        <div className=\"index__card__content__description\">\n          {project.projectMembers.includes(userName) ? (\n            <FontAwesomeIcon icon={faMinusCircle} />\n          ) : !userReview || ! userReview.praise || userReview.praise.length === 0 ? (\n            <FontAwesomeIcon icon={faTimesCircle} />\n          ) : (\n            <FontAwesomeIcon icon={faCheckCircle} />\n          )}\n        </div>\n      </div>\n\n      <div className=\"index__card__content\">\n        {project.description !== undefined ? (\n          <>\n            <div className=\"index__card__content__title\">Description</div>\n            <div className=\"index__card__content__description\">\n              {he.decode(project.description)}\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      <div className=\"index__card__content\">\n        {project.presentationUrl !== undefined ? (\n          <>\n            <div className=\"index__card__content__title\">\n              Vidéo de présentation\n            </div>\n\n            <div className=\"index__card__content__description\">\n              <YoutubeImage src={project.presentationUrl} />\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      <div className=\"index__card__content\">\n        {project.frontendProductionUrl !== undefined ? (\n          <>\n            <div className=\"index__card__content__title\">URL du site</div>\n            <div className=\"index__card__content__description\">\n              <a href={project.frontendProductionUrl} target=\"_blank\">\n                {project.frontendProductionUrl}\n              </a>\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      {/* Deals with praises : this shall be shown :\n      if the attribute exists OR\n      if the user is adding a review (equivalent to a project update) */}\n      <div className=\"index__card__content\">\n        {project.praise !== undefined || isBeingEdited ? (\n          <>\n            <div className=\"index__card__content__title\">Mes points forts</div>\n            <ContentEditable\n              className=\"index__card__content__description\"\n              isBeingEdited={isBeingEdited}\n              id=\"praise\"\n              startContent={userReview ? userReview.praise : \"\"}\n              onChange={handleChange}\n            />\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      {/* Deals with notImpressed points : this shall be shown :\n      if the attribute exists OR\n      if the user is adding a review (equivalent to a project update) */}\n      <div className=\"index__card__content\">\n        {project.notImpressed !== undefined || isBeingEdited ? (\n          <>\n            <div className=\"index__card__content__title\">\n              Mes points d'amélioration\n            </div>\n            <ContentEditable\n              className=\"index__card__content__description\"\n              isBeingEdited={isBeingEdited}\n              id=\"notImpressed\"\n              startContent={userReview ? userReview.notImpressed : \"\"}\n              onChange={handleChange}\n            />\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      <div className=\"index__card__content\">\n        {project.frontendRepo !== undefined ? (\n          <>\n            <div className=\"index__card__content__title\">Repo frontend</div>\n\n            <div className=\"index__card__content__description\">\n              <a href={project.frontendRepo} target=\"_blank\">\n                {project.frontendRepo}\n              </a>\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      <div className=\"index__card__content\">\n        {project.backendRepo !== undefined ? (\n          <>\n            <div className=\"index__card__content__title\">Repo backend</div>\n            <div className=\"index__card__content__description\">\n              <a href={project.backendRepo} target=\"_blank\">\n                {project.backendRepo}\n              </a>\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      {/* Deal with project members : show only if :\n      there are project members AND \n      project review is detailed */}\n      <div className=\"index__card__content\">\n        {project.projectMembers !== undefined &&\n        project.projectMembers.length > 0 &&\n        isDetailed ? (\n          <>\n            <div className=\"index__card__content__title\">Membres du projet</div>\n            <div className=\"index__card__content__description\">\n              {project.projectMembers\n                .map((member) => getNamesFromEmail(member))\n                .join(\", \")}\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      {/* Deal with Like \n      allow a Like to be edited from false to true (a heart cannot be removed) \n      only when the user has still like to be given\n      the state provides the info to ensure that we disable only when we load the component\n      (because we want to allow updating like prior to click on save)\n      NB : this shall be shown :\n      if the attribute exists OR\n      if the user is adding a review (equivalent to a project update) */}\n      <div className=\"index__card__content\">\n        {(project.like !== undefined) | isBeingEdited ? (\n          <>\n            <div className=\"index__card__content__title\">Favori ?</div>\n            <div className=\"index__card__content__description\">\n              <input\n                type=\"checkbox\"\n                checked={like}\n                disabled={\n                  !isBeingEdited || myReviewSummaryData.availableLike === 0\n                    ? true\n                    : like && !projectUpdateState.like\n                    ? true\n                    : false\n                }\n                onClick={onSetLike}\n              />\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n      </div>\n\n      {/* Deal with all praises : show only if :      \n      project review is detailed AND\n      there are user reviews for this project*/}\n\n      {isDetailed && project.projectReviews && project.projectReviews.length > 0\n        ? project.projectReviews.map((review, index) => (\n            <div className=\"index__card__content\">\n              <div className=\"index__card__content__title\">\n                {index === 0 ? \"Tous les points forts\" : \"\"}\n              </div>\n              <div className=\"index__card__content__description\">\n                <Quote\n                  content={he.decode(review.praise)}\n                  author={getNamesFromEmail(review.userName)}\n                />\n              </div>\n            </div>\n          ))\n        : \"\"}\n\n      {/* Deal with all improvements : show only if :      \n      project review is detailed AND\n      there are user reviews for this project*/}\n\n      {isDetailed && project.projectReviews && project.projectReviews.length > 0\n        ? project.projectReviews.map((review, index) => (\n            <div className=\"index__card__content\">\n              <div className=\"index__card__content__title\">\n                {index === 0 ? \"Tous les points d'amélioration\" : \"\"}\n              </div>\n              <div className=\"index__card__content__description\">\n                <Quote\n                  content={he.decode(review.notImpressed)}\n                  author={getNamesFromEmail(review.userName)}\n                />\n              </div>\n            </div>\n          ))\n        : \"\"}\n    </div>\n  );\n};\n\nexport default ReviewCard;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { fas, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Spinner = () => {\n  return (\n    <div className=\"spinner\">\n      <div className=\"spinner__overlay\"></div>\n      <div className=\"spinner__animation\">\n        <FontAwesomeIcon icon={faSpinner} className=\"fa-3x fa-spin\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","// Helper function to call our API\n// using authorization bearer token scheme\nexport default async function callAPI(endpoint, method = \"get\", token, data) {\n  let headers = new Headers();\n  let options = {};\n  options.method = method;\n\n  console.log(\"token :\", token);\n\n  if (token) {\n    const bearer = `Bearer ${token}`;\n    headers.append(\"Authorization\", bearer);\n  }\n\n  if (data) {\n    options.body = JSON.stringify(data);\n  }\n\n  if (\n    method.toLowerCase() === \"post\" ||\n    method.toLowerCase() === \"patch\" ||\n    method.toLowerCase() === \"put\"\n  )\n    headers.append(\"Content-Type\", \"application/json\");\n  options.headers = headers;  \n  const url = process.env.GATSBY_API_URL + endpoint;\n  console.log(\n    \"request made to API at: \" + new Date().toString(),\n    \"URL:\",\n    url,\n    \"Options:\",\n    options\n  );\n  try {\n    const response = await fetch(url, options);\n\n    if (!response.ok) {\n      let fullErrorMessage =\n        \" Error code : \" +\n        response.status +\n        \" : \" +\n        response.statusText +\n        \"/nMessage : \";\n      const textResponse = await response.text();\n      fullErrorMessage += textResponse;\n      console.error(\"fetch() error\", fullErrorMessage);\n      // deal with token expiration\n      if (fullErrorMessage.search(\"expired\") > -1) {\n        console.log(\"token expired\");\n      }\n      throw new Error(fullErrorMessage);\n    }\n    return await response.json();\n  } catch (error) {\n    console.log(\"error:\", error);\n    throw error;\n  }\n}\n\n","import { InteractionRequiredAuthError } from \"@azure/msal-browser\";\n\nasync function getAsyncIdToken(accounts, instance) {\n  if (accounts.length > 0) {\n    const request = {\n      scopes: [\"openid\"],\n      account: accounts[0],\n    };\n\n    try {\n      const response = await instance.acquireTokenSilent(request);\n      return response.idToken;\n    } catch (error) {\n      // acquireTokenSilent can fail for a number of reasons, fallback to interaction\n      if (error instanceof InteractionRequiredAuthError) {\n        const response2 = await instance.acquireTokenRedirect(request);\n        return response2.idToken;\n      }\n    }\n  }\n}\n\nexport { getAsyncIdToken };\n","const getNamesFromEmail = (email) => {\n  let names = email.substring(0, email.indexOf(\"@\"));\n  let firstname = names.substring(0, names.indexOf(\".\"));\n  let lastname = names.substring(names.indexOf(\".\") + 1);\n  firstname = firstname.charAt(0).toUpperCase() + firstname.slice(1);\n  lastname = lastname.charAt(0).toUpperCase() + lastname.slice(1);\n  // deal with cases where Extra info is added to the name, when there is a second dot\n  if (lastname.indexOf(\".\") >= 0) {\n    lastname = lastname.substring(lastname.indexOf(\".\") + 1);\n    lastname = lastname.charAt(0).toUpperCase() + lastname.slice(1);\n  }\n  return firstname + \" \" + lastname;\n};\n\nexport { getNamesFromEmail };\n"],"names":["currentContent","allClasses","className","isBeingEdited","onChange","startContent","id","isInline","children","he","contentEditable","onInput","e","propUpdated","currentTarget","textContent","suppressContentEditableWarning","ProjectDataContext","React","ProjectDataProvider","useState","undefined","projectGroupData","setProjectGroupData","userData","setUserData","projectData","setProjectData","isLoaded","setIsLoaded","Provider","value","useProjectData","useMsal","instance","accounts","useContext","updateProjectGroupData","associatedProjectGroupName","getAsyncIdToken","idToken","callAPI","tempProjectGroup","console","error","updateUserData","tempUser","updateProjectData","projectGroupName","tempProject","addOneProject","newProject","deleteOneProject","project","_id","deletedProject","addMemberToProject","projectUpdated","deleteMemberFromProject","updateProject","data","ReviewDataContext","ReviewDataProvider","myReviewSummaryData","setMyReviewSummaryData","allReviewsData","setAllReviewsData","myReviewsData","setMyReviewsData","updateOperationCount","useReviewData","updateMyReviewSummaryData","userName","myReviewSummary","updateMyReviewsData","myReviews","updateAllReviewsData","allReviews","updateExpectedProjectReview","reviewUpdated","createFreeProjectReview","projectId","newReview","myReviewsSummary","icon","faHeart","availableLike","faComment","expectedReviews","alreadyReviewed","countLiked","countExpected","countReviews","content","author","userReview","setFilteredContents","username","praise","projectReviews","length","find","element","setIsBeingEdited","like","setLike","projectUpdateState","setProjectUpdateState","isDetailed","setIsDetailed","detailedElementRef","useRef","useEffect","current","scrollIntoView","onProjectSave","Object","keys","notImpressed","updatedProject","handleChange","propChanged","previousState","ref","shortId","name","projectMembers","includes","faCommentDots","onClick","faSave","faTimes","faEye","faMinusCircle","faCheckCircle","faTimesCircle","description","presentationUrl","src","frontendProductionUrl","href","target","frontendRepo","backendRepo","map","member","getNamesFromEmail","join","type","checked","disabled","review","index","faSpinner","endpoint","method","token","headers","Headers","options","bearer","append","body","JSON","stringify","toLowerCase","url","process","fetch","response","ok","fullErrorMessage","status","statusText","text","textResponse","search","Error","json","request","scopes","account","acquireTokenSilent","InteractionRequiredAuthError","acquireTokenRedirect","response2","email","names","substring","indexOf","firstname","lastname","charAt","toUpperCase","slice"],"sourceRoot":""}