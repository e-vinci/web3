"use strict";(self.webpackChunkmyweb3course=self.webpackChunkmyweb3course||[]).push([[355],{18329:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(67294),a=n(1597),c=n(69233),i=n(41066),o=n(3290),s=n(15861),d=n(87757),l=n.n(d),u=n(49256),m=n(4942),_=(n(16267),n(33364)),p=n(35514),f=n(43405),v=n(89802);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.project,n=e.setFilteredContents,a=(0,r.useState)(!1),c=a[0],i=a[1],d=(0,r.useState)(t.isPublic),m=d[0],E=d[1],b=(0,r.useState)({}),j=b[0],h=b[1],g=(0,o.X)(),N=g.deleteOneProject,k=g.updateProjectData,C=g.addMemberToProject,P=g.deleteMemberFromProject,w=g.updateProject,y=g.userData,O=g.projectGroupData,F=g.projectData,D=function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return e.next=4,k(t.projectGroupName);case 4:n(void 0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:if(e.sent,!k){e.next=7;break}return e.next=6,k(t.projectGroupName);case 6:n(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(e.sent,!k){e.next=7;break}return e.next=6,k(t.projectGroupName);case 6:n(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=10;break}return e.next=3,w(j,t._id);case 3:if(r=e.sent,h({}),i(!1),!r){e.next=10;break}return e.next=9,k(t.projectGroupName);case 9:n(void 0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){h((function(t){return x(x({},t),e)}))};return t?r.createElement("div",{className:"index__card"+(c?" index__card--is-being-edited":""),key:t.shortId,id:t.shortId},r.createElement("div",{className:"index__card__header"},r.createElement("span",null,"Projet N° "+t.shortId+" : "),r.createElement(v.Z,{isBeingEdited:c,id:"name",onChange:M,startContent:t.name,isInline:!0})),r.createElement("div",{className:"index__card__description"},y.isAdmin&&r.createElement(_.G,{icon:p.I7k,onClick:D}),(y.isAdmin||t.projectMembers.includes(y.userName)&&"end"!==O.status)&&!c?r.createElement(_.G,{icon:p.Xcf,onClick:function(){i(!0)}}):"","init"===O.status&&!F.find((function(e){return e.projectMembers.includes(y.userName)}))&&t.projectMembers.length<O.maximumProjectMembers&&r.createElement(_.G,{icon:p.FKd,onClick:G}),"init"===O.status&&t.projectMembers.includes(y.userName)&&r.createElement(_.G,{icon:p.iC0,onClick:Z}),c&&r.createElement(_.G,{icon:p.r6l,onClick:R}),c&&r.createElement(_.G,{icon:p.NBC,onClick:function(){i(!1),h({})}})),r.createElement("div",{className:"index__card__content"},void 0!==t.description?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Description"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"description",startContent:t.description,onChange:M})):""),r.createElement("div",{className:"index__card__content"},void 0!==t.presentationUrl?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Vidéo de présentation"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"presentationUrl",startContent:t.presentationUrl,onChange:M},r.createElement(u.Z,{src:t.presentationUrl}))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.frontendProductionUrl?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"URL du site"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendProductionUrl",startContent:t.frontendProductionUrl,onChange:M},r.createElement("a",{href:t.frontendProductionUrl,target:"_blank"},t.frontendProductionUrl))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.frontendRepo?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Repo frontend"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendRepo",startContent:t.frontendRepo,onChange:M},r.createElement("a",{href:t.frontendRepo,target:"_blank"},t.frontendRepo))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.backendRepo?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Repo backend"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"backendRepo",startContent:t.backendRepo,onChange:M},r.createElement("a",{href:t.backendRepo,target:"_blank"},t.backendRepo))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.projectMembers&&t.projectMembers.length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Membres du projet"),r.createElement("div",{className:"index__card__content__description"},t.projectMembers.map((function(e){return(0,f.w)(e)})).join(", "))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.isPublic?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Public ?"),r.createElement("div",{className:"index__card__content__description"},r.createElement("input",{type:"checkbox",checked:m,disabled:!c,onClick:function(e){E(!m),h(x(x({},j),{isPublic:!m}))}}))):"")):null},j=function(e){var t=e.projects,n=e.setFilteredContents;return!t||t.length<=0?null:r.createElement(r.Fragment,null,t.map((function(e){return r.createElement(b,{project:e,setFilteredContents:n})})))},h=n(99896),g=function(e){var t=e.associatedProjectGroupName,n=(0,o.X)(),a=n.projectGroupData,c=n.updateProjectGroupData,i=n.userData,d=n.updateUserData,u=n.isLoaded,m=n.projectData,_=n.addOneProject,p=n.updateProjectData,f=(0,r.useState)(void 0),v=f[0],E=f[1],x=(0,r.useState)(""),b=(x[0],x[1]),g=function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(a._id);case 2:return e.next=4,p(a._id);case 4:e.sent,E(void 0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){N()}),[]);var N=function(){var e=(0,s.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:return n=e.sent,e.next=6,d(t);case 6:return e.sent,e.next=9,p(n._id);case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("getData:error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,!u&&r.createElement(h.Z,null),void 0===a?"":r.createElement("div",{className:"pl-3 pt-3 pb-3 pr-3"},r.createElement("h3",{className:""},"Projets des groupes de ",null==a?void 0:a._id),r.createElement("div",{className:"index"},r.createElement("input",{type:"text","aria-label":"Search",placeholder:"Filtrez les contenus...",onChange:function(e){var t=e.target.value;b(e.target.value);var n=m.filter((function(e){var n=e.shortId,r=e.name,a=e.description;return r.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||t.length>0&&parseInt(t)===n}));n&&n.length>0?E(n):E(void 0)},className:"index__search"}),v&&v.length>0?r.createElement(j,{projects:v,setFilteredContents:E}):r.createElement(j,{projects:m,setFilteredContents:E})),void 0!==i&&i.isAdmin?r.createElement("button",{className:"index__button",onClick:g},"Ajouter projet"):""))},N=(0,i.O)((function(){var e=(0,a.useStaticQuery)("758242238"),t=null==e?void 0:e.site.siteMetadata.defaultAssociatedProjectGroupName;return r.createElement(o.a,null,r.createElement(c.Z,null,r.createElement(g,{associatedProjectGroupName:t})))}))}}]);
//# sourceMappingURL=component---src-pages-project-page-js-e16c8e6508f244717cbe.js.map