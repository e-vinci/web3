"use strict";(self.webpackChunkmyweb3course=self.webpackChunkmyweb3course||[]).push([[355],{9802:function(e,t,r){var n=r(7294),a=r(6267),c=r.n(a);t.Z=e=>{let{className:t,isBeingEdited:r,onChange:a,startContent:o,id:i,isInline:s,children:d}=e;let l,u;return r?l=o?c().decode(o):"":d?l=d:o&&(l=o?c().decode(o):""),u=t||"",r&&(u+=" index__card__content__description--is-being-edited"),s&&(u+=" index__card__content__description--is-inline"),n.createElement("div",{className:u,contentEditable:!!r,onInput:e=>{const t={};t[i]=e.currentTarget.textContent,a(t)},suppressContentEditableWarning:!0},l)}},3290:function(e,t,r){r.d(t,{X:function(){return u},a:function(){return l}});var n=r(4942),a=r(7294),c=r(693),o=r(8709),i=r(144);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const d=a.createContext([{},()=>{},{},()=>{},{},()=>{},{},()=>{}]),l=e=>{let{children:t}=e;const{0:r,1:n}=(0,a.useState)(void 0),{0:c,1:o}=(0,a.useState)(void 0),{0:i,1:s}=(0,a.useState)(void 0),{0:l,1:u}=(0,a.useState)(!1);return a.createElement(d.Provider,{value:[r,n,c,o,i,s,l,u]},t)},u=()=>{const{instance:e,accounts:t}=(0,o.Fp)(),{0:r,1:l,2:u,3:p,4:m,5:_,6:j,7:E}=(0,a.useContext)(d);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{projectGroupData:r,updateProjectGroupData:async r=>{try{const n=await(0,i.t)(t,e),a=await(0,c.Z)("projectgroups/"+r,"get",n,void 0);return l(a),a}catch(n){console.error("useProjectData:error:",n)}},userData:u,updateUserData:async r=>{try{const n=await(0,i.t)(t,e),a=await(0,c.Z)("users/role/?projectgroupname="+r,"get",n,void 0);return p(a),a}catch(n){console.error("useProjectData:updateUserData:error:",n)}},projectData:m,updateProjectData:async r=>{try{const n=await(0,i.t)(t,e);E(!1);let a=await(0,c.Z)("projects/projectgroups/"+r,"get",n,void 0);return _(a),E(!0),a}catch(n){console.error("useProjectData:updateProjectDataerror:",n)}},addOneProject:async r=>{try{const n=await(0,i.t)(t,e);return await(0,c.Z)("projects","post",n,{projectGroupName:r})}catch(n){console.error("useProjectData:addOneProject:error:",n)}},deleteOneProject:async r=>{try{const n=await(0,i.t)(t,e);return await(0,c.Z)("projects/"+r._id,"DELETE",n,void 0)}catch(n){console.error("useProjectData:deleteOneProject:error:",n)}},addMemberToProject:async r=>{try{const n=await(0,i.t)(t,e);return await(0,c.Z)("projects/"+r._id+"/member","POST",n,void 0)}catch(n){console.error("useProjectData:addMemberToProject:error:",n)}},deleteMemberFromProject:async r=>{try{const n=await(0,i.t)(t,e);return await(0,c.Z)("projects/"+r._id+"/member","DELETE",n,void 0)}catch(n){console.error("useProjectData:deleteMemberFromProject:error:",n)}},updateProject:async(r,n)=>{try{const a=await(0,i.t)(t,e);return await(0,c.Z)("projects/"+n,"PATCH",a,r)}catch(a){console.error("useProjectData:updateProject:error:",a)}},isLoaded:j,setIsLoaded:E})}},9896:function(e,t,r){var n=r(7294),a=r(3364),c=r(5514);t.Z=()=>n.createElement("div",{className:"spinner"},n.createElement("div",{className:"spinner__overlay"}),n.createElement("div",{className:"spinner__animation"},n.createElement(a.G,{icon:c.LM3,className:"fa-3x fa-spin"})))},8329:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n=r(7294),a=r(1082),c=r(7101),o=r(1066),i=r(3290),s=r(9256),d=r(4942),l=(r(6267),r(3364)),u=r(5514),p=r(3405),m=r(9802);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=e=>{let{project:t,setFilteredContents:r}=e;const{0:a,1:c}=(0,n.useState)(!1),{0:o,1:d}=(0,n.useState)(t.isPublic),{0:_,1:E}=(0,n.useState)({}),{deleteOneProject:b,updateProjectData:f,addMemberToProject:v,deleteMemberFromProject:g,updateProject:h,userData:w,projectGroupData:P,projectData:y}=(0,i.X)(),N=e=>{E((t=>j(j({},t),e)))};return t?n.createElement("div",{className:"index__card"+(a?" index__card--is-being-edited":""),key:t.shortId,id:t.shortId},n.createElement("div",{className:"index__card__header"},n.createElement("span",null,"Projet N° "+t.shortId+" : "),n.createElement(m.Z,{isBeingEdited:a,id:"name",onChange:N,startContent:t.name,isInline:!0})),n.createElement("div",{className:"index__card__description"},w.isAdmin&&n.createElement(l.G,{icon:u.I7k,onClick:async()=>{await b(t),await f(t.projectGroupName),r(void 0)}}),(w.isAdmin||t.projectMembers.includes(w.userName)&&"end"!==P.status)&&!a?n.createElement(l.G,{icon:u.Xcf,onClick:()=>{c(!0)}}):"","init"===P.status&&!y.find((e=>e.projectMembers.includes(w.userName)))&&t.projectMembers.length<P.maximumProjectMembers&&n.createElement(l.G,{icon:u.FKd,onClick:async()=>{await v(t);f&&(await f(t.projectGroupName),r(void 0))}}),"init"===P.status&&t.projectMembers.includes(w.userName)&&n.createElement(l.G,{icon:u.iC0,onClick:async()=>{await g(t);f&&(await f(t.projectGroupName),r(void 0))}}),a&&n.createElement(l.G,{icon:u.r6l,onClick:async()=>{if(_){const e=await h(_,t._id);E({}),c(!1),e&&(await f(t.projectGroupName),r(void 0))}}}),a&&n.createElement(l.G,{icon:u.NBC,onClick:()=>{c(!1),E({})}})),n.createElement("div",{className:"index__card__content"},void 0!==t.description?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Description"),n.createElement(m.Z,{className:"index__card__content__description",isBeingEdited:a,id:"description",startContent:t.description,onChange:N})):""),n.createElement("div",{className:"index__card__content"},void 0!==t.presentationUrl?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Vidéo de présentation"),n.createElement(m.Z,{className:"index__card__content__description",isBeingEdited:a,id:"presentationUrl",startContent:t.presentationUrl,onChange:N},n.createElement(s.Z,{src:t.presentationUrl}))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.frontendProductionUrl?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"URL du site"),n.createElement(m.Z,{className:"index__card__content__description",isBeingEdited:a,id:"frontendProductionUrl",startContent:t.frontendProductionUrl,onChange:N},n.createElement("a",{href:t.frontendProductionUrl,target:"_blank"},t.frontendProductionUrl))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.frontendRepo?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Repo frontend"),n.createElement(m.Z,{className:"index__card__content__description",isBeingEdited:a,id:"frontendRepo",startContent:t.frontendRepo,onChange:N},n.createElement("a",{href:t.frontendRepo,target:"_blank"},t.frontendRepo))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.backendRepo?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Repo backend"),n.createElement(m.Z,{className:"index__card__content__description",isBeingEdited:a,id:"backendRepo",startContent:t.backendRepo,onChange:N},n.createElement("a",{href:t.backendRepo,target:"_blank"},t.backendRepo))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.projectMembers&&t.projectMembers.length>0?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Membres du projet"),n.createElement("div",{className:"index__card__content__description"},t.projectMembers.map((e=>(0,p.w)(e))).join(", "))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.isPublic?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Public ?"),n.createElement("div",{className:"index__card__content__description"},n.createElement("input",{type:"checkbox",checked:o,disabled:!a,onClick:e=>{d(!o),E(j(j({},_),{isPublic:!o}))}}))):"")):null};var b=e=>{let{projects:t,setFilteredContents:r}=e;return!t||t.length<=0?null:n.createElement(n.Fragment,null,t.map((e=>n.createElement(E,{project:e,setFilteredContents:r}))))},f=r(9896);var v=e=>{let{associatedProjectGroupName:t}=e;const{projectGroupData:r,updateProjectGroupData:a,userData:c,updateUserData:o,isLoaded:s,projectData:d,addOneProject:l,updateProjectData:u}=(0,i.X)(),{0:p,1:m}=(0,n.useState)(void 0),{0:_,1:j}=(0,n.useState)("");(0,n.useEffect)((()=>{E()}),[]);const E=async()=>{try{const e=await a(t);await o(t),await u(e._id)}catch(e){console.error("getData:error",e)}};return n.createElement(n.Fragment,null,!s&&n.createElement(f.Z,null),void 0===r?"":n.createElement("div",{className:"pl-3 pt-3 pb-3 pr-3"},n.createElement("h3",{className:""},"Projets des groupes de ",null==r?void 0:r._id),n.createElement("div",{className:"index"},n.createElement("input",{type:"text","aria-label":"Search",placeholder:"Filtrez les contenus...",onChange:e=>{const t=e.target.value;j(e.target.value);const r=d.filter((e=>{const{shortId:r,name:n,description:a}=e;return n.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||t.length>0&&parseInt(t)===r}));r&&r.length>0?m(r):m(void 0)},className:"index__search"}),p&&p.length>0?n.createElement(b,{projects:p,setFilteredContents:m}):n.createElement(b,{projects:d,setFilteredContents:m})),void 0!==c&&c.isAdmin?n.createElement("button",{className:"index__button",onClick:async()=>{await l(r._id);await u(r._id);m(void 0)}},"Ajouter projet"):""))};var g=(0,o.O)((()=>{const e=(0,a.useStaticQuery)("758242238"),t=null==e?void 0:e.site.siteMetadata.defaultAssociatedProjectGroupName;return n.createElement(i.a,null,n.createElement(c.Z,null,n.createElement(v,{associatedProjectGroupName:t})))}))},693:function(e,t,r){async function n(e,t,r,n){void 0===t&&(t="get");let a=new Headers,c={};if(c.method=t,r){const e="Bearer "+r;a.append("Authorization",e)}n&&(c.body=JSON.stringify(n)),"post"!==t.toLowerCase()&&"patch"!==t.toLowerCase()&&"put"!==t.toLowerCase()||a.append("Content-Type","application/json"),c.headers=a;const o="https://e-vinci-course-api.azurewebsites.net/api/"+e;try{const e=await fetch(o,c);if(!e.ok){let t=" Error code : "+e.status+" : "+e.statusText+"/nMessage : ";throw t+=await e.text(),console.error("fetch() error",t),t.search("expired"),new Error(t)}return await e.json()}catch(i){throw i}}r.d(t,{Z:function(){return n}})},144:function(e,t,r){r.d(t,{t:function(){return a}});var n=r(640);async function a(e,t){if(e.length>0){const a={scopes:["openid"],account:e[0]};try{return(await t.acquireTokenSilent(a)).idToken}catch(r){if(r instanceof n.Yo){return(await t.acquireTokenRedirect(a)).idToken}}}}},3405:function(e,t,r){r.d(t,{w:function(){return n}});const n=e=>{let t=e.substring(0,e.indexOf("@")),r=t.substring(0,t.indexOf(".")),n=t.substring(t.indexOf(".")+1);return r=r.charAt(0).toUpperCase()+r.slice(1),n=n.charAt(0).toUpperCase()+n.slice(1),n.indexOf(".")>=0&&(n=n.substring(n.indexOf(".")+1),n=n.charAt(0).toUpperCase()+n.slice(1)),r+" "+n}}}]);
//# sourceMappingURL=component---src-pages-project-page-js-ff453a56fd025388d834.js.map