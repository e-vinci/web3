---
title: "Module 2 : IHM moderne & dynamique"
description: "Utilisation d'outils de d√©veloppeurs pour cr√©er une IHM moderne & g√©n√©ration d'HTML dynamique"
---
import 'bootstrap/dist/css/bootstrap.min.css';

# Module 2 : IHM moderne & dynamique
Ce module vous offre principalement une d√©couverte de l'utilisation d'outils de d√©veloppeurs pour cr√©er une IHM moderne ainsi que la g√©n√©ration d'HTML dynamique et de pages web esth√©tiques.

Voici les sujets trait√©s :
- a) [D√©veloppement d'IHM modernes](#a)
  - a.1) [Introduction](#a1)
  - a.2) [Les modules bundlers](#a2)
  - a.3) [Comment cr√©er une IHM moderne ?](#a3)
  - a.4) [Cr√©ation du squelette d'une IHM √† partir d'un boilerplate](#a4)
  - a.5) [Installation de toutes les d√©pendances d'une application](#a5)
  - a.6) [Installation des extensions pour le linter et le formater](#a6)
  - a.7) [Ex√©cution de l'application √† l'aide d'un serveur de d√©veloppement de Webpack](#a7)
  - a.8) [Fonctionnement de Webpack pour g√©rer des assets](#a8)
  - a.9) [Installation d'un package](#a9)
- b) [D√©veloppement d'IHM esth√©tiques](#b)
  - b.1) [Introduction](#b1)
  - b.2) [Introduction √† Bootstrap](#b2)
  - b.3) [Le Layout en Bootstrap](#b3)
  - b.4) [Les breakpoints en Bootstrap](#b4)
  - b.5) [Les composants Bootstrap](#b5)
  - b.6) [Utilisation de Bootstrap dans un frontend moderne](#b6)
- c) [D√©veloppement d'IHM dynamiques](#c)
  - c.1) [Introduction](#c1)
  - c.2) [G√©n√©ration d'HTML √† partir d'une string](#c2)
  - c.3) [Ajout dynamique d'√©couteurs d'√©v√©nements une fois le DOM rendu](#c3)
  - c.4) [G√©n√©ration d'HTML √† partir de Nodes](#c4)
  - c.5) [Ajout dynamique d'√©couteurs d'√©v√©nements avant de rendre le DOM](#c5)
  - c.6) [Utilisation de Bootstrap dans un frontend moderne](#c6)
- d) [Debbuging d'un frontend tournant sous Webpack](#d)
- e) [Exercice 2.1 : Homepage statique de myMovies & Webpack](#e)
- f) [Exercice 2.2 : G√©n√©ration dynamique de la Homepage de myMovies](#f)
- g) [Exercice 2.3 : G√©n√©ration dynamique d'une table sur base d'un formulaire](#g)
- h) [üç¨ Exercice 2.4 : design responsive](#g)

# <a id="a"></a>a) D√©veloppement d'IHM modernes
## <a id="a1"></a>a.1) Introduction
Au module 1, nous avons d√©velopp√© des applications web fa√ßon "old school".

Dans le tutoriel du module 1, nous avons cr√©√© la HomePage du site d'une pizzeria, en y ajoutant facilement deux animations gr√¢ce √† une librairie externe ([Animate.css](https://animate.style/)).

Imaginez maintenant que le site web de la pizzeria continue √† grandir.  
Au fur et √† mesure que nous allons lui ajouter des fonctionnalit√©s, nous allons souhaiter utiliser de nouvelles librairies externes.

Pour chaque librairie externe que nous souhaitons ajouter, nous aurons √† inclure une balise **`<script>`** a sein d'**index.html**.

Nous allons donc facilement, lors du d√©veloppement d'une application web, utiliser une ou plusieurs dizaine(s) de librairies externes, que l'on appelle aussi d√©pendances.

La gestion de ces d√©pendances est difficile √† g√©rer et √† maintenir :
- si vous souhaitez avoir des versions locales de ces d√©pendances, vous devez vous m√™me manuellement t√©l√©charger les fichiers **.js** et **.css** associ√©s √† vos librairies, inclure ensuite le bon chemin pour la propri√©t√© **src** des balises **scripts**.
- en cas de nouvelle version d'une librairie, vous √™tes difficilement inform√© ;
- la mise √† jour d'une d√©pendance impose pas mal de manipulations : si vous utilisez des versions locales des d√©pendances, re-t√©l√©chargement de celles-ci, changement des propri√©t√©s **src** des balises **scripts** impact√©es...
- lorsque vous travaillez √† plusieurs d√©veloppeurs sur un m√™me projet, pour que tout le monde obtienne les d√©pendances si vous utiliser des versions locales au serveur web, vous risquez de devoir mettre celles-ci en configuration (via Gitlab ou Github) ; c'est vraiment dommage de mettre en configuration les d√©pendances, le code de quelqu'un d'autre.

Ainsi, pour cr√©er des IHM de mani√®re moderne, nous souhaiterions b√©n√©ficier d'outils facilitant le d√©veloppement.

Nous souhaiterions :
- une gestion moderne des d√©pendances (et de leur d√©pendances), via un gestionnaire de packages ;
- √©crire du JS moderne et utiliser, si n√©cessaire, un outil pour g√©n√©rer du JS pour d'anciens browsers ; 
- du hot reload : lorsque l'on modifie un script, l'application web se rafraichisse dans le browser ;
- que notre √©diteur de code nous informe quand nous √©crivons du JS qui ne r√©pond pas √† des conventions de programmation ;
- transformer les assets √† la compilation (optimisation d'images, SASS vers CSS...)
- ...

Ainsi, nous allons abandonner la programmation "old school" dans ce module et d√©couvrir des outils de programmation modernes, principalement les **module bundlers**.

## <a id="a2"></a> a.2) Les modules bundlers
Un module bundler est un outil mis √† la disposition des d√©veloppeurs.

Il permet la gestion ais√©e des modules, packages et de leurs d√©pendances.

Probablement sa plus grande utilit√© et de permettre d'utiliser des packages faits pour Node.js (un environnement serveur) au sein d'un browser (un environnement client).

Certains modules bundler permettent d'autres fonctionnalit√©s comme la gestion ais√©e des assets, la transpilation de code moderne vers du code ancien‚Ä¶

Voici quelques modules bundlers parmi les plus connus : Webpack [[R.33]](/references/#r33), browserify, parcel.

Dans le cadre de ce cours, nous avons choisi Webpack.

Pour pouvoir installer cet outil, tout comme n'importe quel package, nous utiliserons le gestionnaire de packages de Node.js **npm**.

A ce stade-ci, si √ßa n'est pas d√©j√† fait, il est important que vous installiez l'environnement [Node.js en version LTS](https://nodejs.org/en/) [[R.34]](/references/#r34): 

‚ö° Attention √† ne pas installer la derni√®re version de Node.js, mais bien la version LTS, sinon vous risquez beaucoup d'incompatibilit√©s lors de l'ex√©cution des boilerplates, tutoriels & d√©mos du cours.

## <a id="a3"></a> a.3) Comment cr√©er une IHM moderne ?
Nous avons vu que pour cr√©er une application web moderne, il est important d'utiliser un module bundler.

Il reste n√©anmoins encore √† d√©cider comment nous allons initier la cr√©ation de nos projets pour b√©n√©ficier d'outils de d√©veloppement modernes.

Voici les options possibles :
- **Utiliser un boilerplate contenant le squelette d'une IHM (incluant une bonne configuration des outils de d√©veloppement) et ses d√©pendances** ; nous allons utiliser cette option dans le cadre de ce cours ;
- **Utiliser un framework ou une librairie comme React, Vue ou Angular** ; comme expliqu√© dans l'introduction, nous n'allons pas utiliser de Framework pour cr√©er nos IHM. Nous trouvons ces frameworks tr√®s utiles, n√©anmoins nous estimons 
qu'il est primordial de bien pratiquer le Vanilla JS avant de se lancer dans un framework pour votre frontend.
- **Cr√©er et configurer son projet "from scratch"** ; c'est une partie qui sera faite par les initi√©s ; en r√®gle g√©n√©rale, les d√©veloppeurs pr√©f√®rent utiliser des outils de d√©veloppement d√©j√† configur√©s plut√¥t que de devoir mettre en place tout l'environnement de d√©veloppement. C'est ce qui fait notamment le succ√®s de l'utilisation de frameworks, car ils offrent des outils de d√©veloppement g√©n√©ralement bien configur√©s "out of the box" (dans les boilerplates de base). 

Comme expliqu√© ci-dessus, vous ne devez pas conna√Ætre comment configurer un module bundler pour b√©n√©ficier d'outils de d√©veloppement modernes.

Nous estimons qu'il est important que vous compreniez comment pouvoir utiliser, et √©ventuellement modifier, une configuration de base offerte au sein d'un boilerplate. 

üç¨ Si n√©anmoins vous souhaitez approfondir la configuration d'un environnement de d√©veloppement pour un frontend, √† l'aide de Webpack, vous pouvez suivre ces deux tutoriels :
- [webpack-part1-hmi](https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/webpack-part1-hmi).
- [webpack-part2-hmi](https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/webpack-part2-hmi).

Ces deux tutoriels, totalement optionnels, expliquent comment le [boilerplate de base du cours](https://github.com/e-vinci/js-basic-boilerplate.git) a √©t√© cr√©√©.

## <a id="a4"></a> a.4) Cr√©ation du squelette d'une IHM √† partir d'un boilerplate
Nous allons faire un refactor du site de la pizzeria d√©velopp√© fa√ßon "Old School" au module 1 en utilisant des outils de d√©veloppement modernes.

Pour ce faire, nous allons utiliser le [boilerplate de base du cours](https://github.com/e-vinci/js-basic-boilerplate.git) qui met √† disposition un projet bien configur√©.

Au fur et √† mesure du tutoriel qui suit, nous allons comprendre ce qu'offre Webpack en tant que module bundler.

Dans votre repo **web2**, nous allons cr√©er le r√©pertoire **/tutorials/pizzeria/hmi/modern** en clonant le boilerplate.

Pour ce faire, veuillez ouvrir un terminal dans le r√©pertoire **/tutorials/pizzeria/hmi**.

Il est possible de faire un clic droit dans l'Explorer de VS Code sur le r√©pertoire **hmi**, **Open in Integrated Terminal** pour ouvrir un terminal au bon endroit :

<ScrollableImage name="terminal-1.png" minWidth="481px" maxWidth="500px" />

<figcaption>Acc√®s rapide √† un terminal au chemin d√©sir√©</figcaption>

Nous vous conseillons, au sein de VS Code, de configurer pour avoir comme Terminal par d√©faut Git Bash.

Pour ce faire, vous devez avoir install√© Git sur votre machine.

Cliquez √† droite du **+** au sein d'un terminal ouvert dans VS Code, clic sur **Select Default Profile**, puis s√©lectionnez "Git Bash".  
Tous les prochains terminaux que vous ouvrirez le seront sous Git Bash, nettement plus color√© et int√©ressant que les autres terminaux üòé.

<ScrollableImage name="terminal-2.png" minWidth="933px" maxWidth="933px" />

<figcaption>Choix du terminal par d√©faut</figcaption>

Pour cloner le boilerplate dans **/tutorials/pizzeria/hmi** en portant le nom de projet **modern**, veuillez tapez au sein du terminal :

```bash
git clone https://github.com/e-vinci/js-basic-boilerplate.git modern
```

A ce stade-ci, tous les fichiers n√©cessaires sont disponibles dans votre r√©pertoire **modern**.

‚ö° Comme vous avez clon√© votre projet au sein d'un repo existant (**web2**), Git ne trackera pas ce nouveau projet ; en effet, Git ne tracque pas des projets Git dans des projets Git. 

Pour vous assurer que Git traque votre nouveau projet **modern**, vous devez effacer le r√©pertoire **`.git`** se trouvant dans votre nouveau projet.  
N'h√©sitez pas aussi √† effacer **`.gitignore`** se trouvant dans votre nouveau projet.

**package.json** est le fichier de configuration de votre projet.

Veuillez le mettre √† jour afin de :
- donner un nom √† votre projet & une description ;
- vous identifier comme auteur.

## <a id="a5"></a> a.5) Installation de toutes les d√©pendances d'une application
Veuillez entrer dans le r√©pertoire **modern** √† l'aide d'une commande bash, au sein du Terminal de VS Code :

```bash
cd modern # (or the name given to your project)
npm i # (equivalent to `npm install` to install all dependencies )
npm start # run the project
```

Veuillez ensuite installer toutes les d√©pendances, c'est-√†-dire tous les packages qui sont indiqu√©s dans **package.json**

```bash
npm i # (equivalent to `npm install` to install all dependencies )
```

Notons que dans ce cas-ci, ce sont tous ces packages qui sont install√©s (voir **package.json**):

```json
"devDependencies": {
    "@babel/core": "^7.14.3",
    "@babel/preset-env": "^7.14.4",
    "babel-loader": "^8.2.2",
    "css-loader": "^5.2.6",
    "eslint": "^8.18.0",
    "eslint-config-airbnb-base": "^15.0.0",
    "eslint-plugin-import": "^2.26.0",
    "eslint-webpack-plugin": "^3.2.0",
    "html-loader": "^2.1.2",
    "html-webpack-plugin": "^5.3.1",
    "prettier-airbnb-config": "^1.0.0",
    "style-loader": "^2.0.0",
    "webpack": "^5.38.1",
    "webpack-cli": "^4.7.0",
    "webpack-dev-server": "^3.11.2"
  },
  "dependencies": {
    "@popperjs/core": "^2.9.2",
    "bootstrap": "^5.0.1"
  },
```

üí≠ Mais o√π sont install√© tous ces packages ?
C'est dans le r√©pertoire **node_modules**. Il peut vite s'y trouver plusieurs centaines de MB de d√©pendances. C'est donc tr√®s important de ne jamais mettre ce dossier sur vos web repository, via Git. Pour ce faire, n'oubliez pas d'inclure un fichier **.gitignore** dans vos projets pour ignore **node_modules**.

Pour la suite du tutoriel, nous consid√©rons que tous les chemins absolus d√©marrent du r√©pertoire **/tutorials/pizzeria/hmi/modern** (ou **/web2/tutorials/pizzeria/hmi/modern** si l'on consid√®re le nom du r√©pertoire du repo).

## <a id="a6"></a> a.6) Installation des extensions pour le linter et le formater
### a.6.1) Le linter
Nous souhaitons ajouter un outil qui permette de d√©tecter des erreurs de programmation lors de l'√©criture de nos scripts, un linter.   
Nous voulons que le linter impose le style d'Airbnb d√©crit dans le **Airbnb JS style guide**.   
Pour ce faire, gr√¢ce au boilerplate, lorsque nous lan√ßons la commande **`npm start`**, nous utilisons **ESLint** (cet outil est aussi utilis√© par Facebook au sein d'applications React) qui impose un style de programmation conforme aux r√®gles d'Airbnb.   
Lors du build de l'application, nous b√©n√©ficions de feedback sur notre code.

Pour b√©n√©ficier de plus de feedback sur le code, veuillez installer l'extension **ESLint** au sein de VS Code.    
Vous ne devez plus attendre le build pour avoir du feedback sur votre code, cela se fait d√®s l'√©criture ! Vous avez m√™me des propositions de "Quick fix" !

Pour votre info, la configuration des r√®gles de **ESLint** se fait dans le fichier **.eslintrc.js** devant se trouver √† la racine d'un projet et offert au sein du boilerplate.

### a.6.2) Le formater
Pour formater facilement votre code, le boilerplate fournit une configuration de **prettier** conforme √† ce qui est attendu pour coller au style impos√© par le linter, c'est √† dire au style d'Airbnb.

üí≠ Vous souhaitez reformater votre code en accord avec le linter, lors de l'appui sur plusieurs touches ?

Vous devriez r√©pondre "oui" √† cette question, car c'est un gain de temps d'avoir un outil permettant d'am√©liorer la qualit√© de son code, sans efforts.

Pour que la configuration du formater offerte dans le boilerplate soit utile, veuillez installer l'extension **prettier** au sein de VS Code.

Une fois **prettier** install√© dans VS Code, vous pouvez facilement formatter votre code conform√©ment au style d'Airbnb :
- soit en tapant **Shift Alt F** ;
- soit en faisant un clic droit sur votre script, **Format Document** ; la premi√®re fois, il se peut que vous deviez s√©lectionner **prettier** comme formater.

Pour votre info, la configuration des r√®gles de **prettier** se fait dans le fichier **.prettierrc.js** devant se trouver √† la racine d'un projet et offert au sein du boilerplate.

## <a id="a7"></a> a.7) Ex√©cution de l'application √† l'aide d'un serveur de d√©veloppement de Webpack
Veuillez ex√©cuter l'application de base offerte par le boilerplate :

```bash
npm start # run the project, equivalent of : npm run start
```

**package.json** indique les scripts de d√©marrage, en fonction de la fa√ßon dont nous souhaitons d√©marrer l'application :

```json
"scripts": {
    "dev": "webpack --mode development",
    "build": "webpack --mode production",
    "start": "webpack serve --mode development"
  },
```

Lorsque nous tapons **npm start** √† la racine du projet (**modern** ici), c'est en fait le serveur de d√©veloppement de Webpack qui va d√©marrer notre application, 
et une page s'ouvre dans notre browser par d√©faut, affichant le texte "Replace with your page content".

Webpack offre de nombreux outils de d√©veloppement qui sont configur√©s dans le fichier **webpack.config.js**. 

Veuillez jeter un oeil √† ce fichier. Vous verrez notamment qu'un serveur web de d√©veloppement doit d√©marrer sur le port 8080.

Il n'est d√©sormais plus n√©cessaire d'utiliser le Live Server de VS Code pour visualiser nos applications. Cela est directement g√©r√© par Webpack.

Pour stopper l'application, et donc le serveur de d√©veloppement de Webpack, il suffit de taper sur **`CTRL + c`** au sein du terminal.

Et pour la red√©marrer ? 

**`npm start`**.

## <a id="a8"></a> a.8) Fonctionnement de Webpack pour g√©rer des assets
Webpack a √©t√© configur√© afin de g√©n√©rer une fichier **index.html** sur base d'un template donn√© dans **/src/index.html**.

Ce template HTML ne contient pas de balises **`<script>`**.

C'est Webpack qui va s'occuper d'aller chercher toutes les d√©pendances qui doivent √™tre indiqu√©es via des imports dans le fichier **/src/index.js**. Webpack va g√©n√©rer un bundle, une sorte de paquet cadeau, reprenant toutes les d√©pendances ainsi que vos scripts JS et vos autres assets (fichiers CSS, images...).

Dans le boilerplate du cours, **src/index.js** fait l'import de tout ce qui est n√©cessaire pour pouvoir utiliser **Bootstrap** pour pouvoir styler ses pages web √† l'aide de classes pr√©d√©finies ; de plus, **/stylesheets/main.css** et import√© afin de pouvoir cr√©er votre propre style : 

```js
// Import Bootstrap CSS
import 'bootstrap/dist/css/bootstrap.min.css';
// Custom styles
import './stylesheets/main.css';
```

Nous verrons plus tard comment utiliser Bootstrap.

Nous comprenons donc que pour importer une librairie, un asset (image, CSS...), il suffit de le faire √† l'aide du mot-cl√© **import**.

Pour comprendre l'utilisation de Webpack, nous allons maintenant faire un refactor de notre site de la pizzeria r√©alis√© au module 1 en l'int√©grant √† notre nouveau projet.

Veuillez copier / coller le CSS qui √©tait contenu dans **/stylesheets/style.css** au sein de **/stylesheets/main.css** :

```css
html, body {
    height: 100%;
    margin: 0;
}

body { 
    /*to easily deal with sticky footer*/
    display: flex;
    flex-direction: column;
    background-image : url(../img/pizza.jpg);
    background-size : cover;
}


header{
    text-align: center;
}

main{
    text-align: center;
     /*to easily deal with sticky footer:
     grow the main to fill the space*/
    flex: 1 0 auto;
}

footer{
    text-align: center;    
}

footer img {
    height: 50px;
}

footer h1{
    color: white;
}
```

Nous allons maintenant cr√©er le layout HTML de base de notre application sur base de l'ancien **index.html**. 

Les changements √† op√©rer sont : 
- Enlever l'import de la feuille de style directement dans l'HTML : `<link rel="stylesheet" href="./stylesheets/style.css" />`
- Enlever l'import de la librairie externe directement dans l'HTML : ` <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />`
- Enlever l'import du script externe **index.js** directement dans l'HTML : <script src="./index.js"></script>

Le contenu de **/src/index.html** doit devenir :

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizzeria</title>
    <link rel="icon" href="./img/pizza-svgrepo-com.svg" type="image/svg+xml" />
  </head>
  <body>
    <header>
      <h1 class="animate__animated animate__bounce">We love Pizza</h1>
    </header>
    <main>
      <audio id="audioPlayer" controls autoplay>
        <source src="./sound/Infecticide-11-Pizza-Spinoza.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </main>
    <footer>
      <h1 class="animate__animated animate__bounce animate__delay-2s">
        But we also love JS
      </h1>
      <img src="./img/js-logo.png" alt="" />
    </footer>
  </body>
</html>
```

Veuillez ajouter les images et le son du tutoriel pr√©c√©dent dans les r√©pertoires **/src/img** et **src/sound**.

Veuillez ajouter le contenu de l'ancien **index.js** au sein de **/src/index.js** afin de g√©rer les clics sur toute la page :

```js
// Import Bootstrap CSS
import 'bootstrap/dist/css/bootstrap.min.css';
// Custom styles
import './stylesheets/main.css';

import 'animate.css';

const body = document.querySelector('body');

body.addEventListener('click', startOrStopSound);

function startOrStopSound() {
  const myAudioPlayer = document.querySelector('#audioPlayer');

  if (myAudioPlayer.paused) myAudioPlayer.play();
  else myAudioPlayer.pause();
}
```

Veuillez ex√©cuter l'application. 

On voit que quasi tout est fonctionnelle.

Il est important de comprendre que le chargement d'un fichier (image ou son) √† l'aide de Webpack suit un processus lors du build de votre application.

Lorsque vous tapez **npm start**, vous lancez le build de votre application.
Gr√¢ce √† l'installation et √† la configuration du module **`html-loader`**, Webpack √©met le fichier dans le "output directory", g√©n√©ralement **`/dist`**, et remplace la valeur de **`src`** avec le chemin final vers le fichier.

Pour vous en rendre compte, au sein de votre browser, allez dans vos outils de d√©veloppeur de Chrome (**F12** par exemple), au sein de l'onglet **Sources**. Vous allez pouvoir observer :
- **bundle.js** : c'est le fichier contenant notamment toutes les d√©pendances ainsi que votre code JS.
- **`index.html`** ou **`(index)`** dans Chrome : c'est votre page web, il est int√©ressant de voir son contenu. On voit que le bundle y est int√©gr√© dans le **`<head>`**, l'attribut **defer** assurant que l'ex√©cution du script ne se fasse qu'une fois que le parsing de la page, la cr√©ation du DOM, soit termin√©e ! 
- des fichiers avec des noms du style **`c731ea9152350c35fb1d.jpg`** : ce sont vos assets, vos images, dont le nom et chemin ont √©t√© modifi√©s lors du build de votre application. Notez que Webpack pourrait transformer ces fichiers (par exemple en cr√©ant une repr√©sentation m√©moire en base64 des images) lors du build.
- tout les assets sont g√©r√©s par le serveur de d√©veloppement, il n'y a rien de mis dans le r√©pertoire **`/dist`**. Nous allons voir juste apr√®s comment g√©rer un build de production et observer la cr√©ation du r√©pertoire **`/dist`**.

Pour le chargement d'une photo via le CSS, du moment que la photo est dans `/src`, le **Asset Module** de Webpack reconna√Æt la photo localement et va remplacer le chemin final de la photo lors du build.

Nous allons maintenant stopper l'ex√©cution de notre serveur (au sein du terminal, tapez **`CTRL C`**).

Nous pouvons lancer la cr√©ation d'un build de production. 

Un build de production est une version optimis√©e de votre application web, les espaces blancs sont retir√©s, les commentaires...

Pour lancer le build, veuillez taper cette commande dans un terminal : 

```bash
npm run build
```

Veuillez observer ce qui est offert dans le r√©pertoire **/dist** du projet.

On voit notamment que **bundle.js** et **index.html** ont √©t√© optimis√© pour la production.

Pour mettre √† disposition un build de production par un serveur web, nous pouvons utiliser le package **serve** qui offre un serveur de fichiers statiques. Nous allons utiliser une version temporaire de cette application, √† l'aide de la commande **npx**, qui permet d'installer une copie locale et temporaire d'une application, et de directement ex√©cuter cette application.

Veuillez vous rendre dans le r√©pertoire **/dist** et ex√©cuter le serveur **serve**. Pour ce faire, tapez dans votre terminal :

```bash
cd dist
npx serve
```

üéâ Le serveur web tombe sur le fichier **index.html** et met √† disposition votre build de production !

Pour terminer le refactoring du site de la pizzeria, il reste √† installer la d√©pendance permettant de cr√©er des animations.

Veuillez stopper l'ex√©cution du serveur web (au sein du terminal, tapez **`CTRL C`**) et revenir √† la racine du projet.

```bash
cd ..
```

## <a id="a9"></a> a.9) Installation d'un package
Afin de g√©rer des animations, il faut r√©installer la d√©pendance via **npm**, le gestionnaire de packages.

Pour installer un package (ou une d√©pendance), il suffit de faire : **npm i nomDuPackage** ou **npm install nomDuPackage**.

Pour installer la librairie [Animate.css](https://animate.style/) [[R.32]](/references/#r32), il suffit de taper dans un terminal, lorsqu'on se trouve √† la racine du projet (**modern** ici) :

```bash
npm install animate.css
```

Veuillez aller jeter un oeil √† votre fichier **package.json**.  
Lors de l'installation d'un package, celui-ci s'ajoute √† la liste des d√©pendances.  
Ainsi, si des d√©veloppeurs trouvent votre projet sur Git, ils n'auront qu'√† ex√©cuter **`npm i`** afin d'installer toutes les d√©pendances.

En lisant la documentation, nous voyons que pour utiliser la librairie au sein de notre application, il suffit de faire l'import de celle-ci.

Veuillez faire l'import de **Animate.css** au sein de **index.js** en ajoutant cette ligne :

```js
import 'animate.css';
```

Une fois la librairie import√©e, le refactoring du site de la pizzeria est termin√©.

V√©rifiez bien que tout est fonctionnel !

Si tout fonctionne bien, faites un commit de votre repo (**web2**) avec le message "**modern-hmi**".

En cas de souci, vous pouvez acc√©der au code de cette √©tape du tutoriel ici : [modern-hmi](https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/modern-hmi).

# <a id="b"></a>b) D√©veloppement d'IHM esth√©tiques
## <a id="b1"></a>b.1) Introduction
Le design de UI (User Interface) est un m√©tier r√©pr√©sent√© par tout un univers de technologies.

L'objectif de ce cours est de pouvoir cr√©er une IHM de qualit√©, avec peu d'efforts, qui paraisse bien sur tous les appareils (Responsive Web Design).

Il existe de nombreuses fa√ßon de g√©rer le design, le graphisme d'une UI, en passant par l'utilisation :
- de Vanilla CSS / HTML 
- de SASS (pour faciliter la g√©n√©ration de CSS)
- de librairies ; les plus connues sont **Bootstrap** et **tailwindcss**.

Dans le cadre de ce cours, nous vous conseillons d'utiliser **Bootstrap** pour travailler le style de vos applications. Toutes les futurs d√©mos donn√©es dans le cadre de ce cours utiliseront **Bootstrap**.

N√©anmoins, si vous avez d√©j√† beaucoup d'affinit√©s avec le Vanilla CSS, vous pouvez continuer √† approfondir le CSS.

<AuthenticatedBlock>

Le style de vos IHM ne sera pas √©valu√© lors des examens.

Par contre, dans le cadre de votre projet web, le style de vos UI, tout comme l'ergonomie (UX), feront partie int√©grante de l'√©valuation.

</AuthenticatedBlock>

## <a id="b2"></a>b.2) Introduction √† Bootstrap
Bootstrap est une librairie permettant de cr√©er rapidement des sites web "responsive".

Nous faisons une petite introduction √† cet outil dans le cadre de ce cours, afin que vous puissiez facilement d√©couvrir en autonomie cet technologie via son site web : [Bootstrap](https://getbootstrap.com/) [[R.36]](/references/#r36).

Bootstrap offre principalement : 
- Un syst√®me de **Layout** : un **Grid** est constitu√© de **Container**, de **Rows** et de **Columns**. Le tout est construit en utilisant "flexbox" et est donc enti√®rement responsive.
- 6 **responsive breakpoints** : ce sont des r√®gles permettant d'affecter tout ce qui se trouve √† une certaine largeur ou au-del√†. Ils permettent d'indiquer les parties du **Layout** qui doivent s'adapter √† une particuli√®re taille d'un appareil.
- Des **Components** : ce sont des √©l√©ments d'UI pr√©d√©finis, comme par exemple des **Alerts** pour fournir des messages de feedback, des **Cards** pour afficher des infos m√™lant images et textes...
- Des **Helpers** et des **Utilities** notamment afin de g√©rer la couleurs, la taille et l'affichage des **Components**.

En Bootstrap, quand on souhaite cr√©er un composant, on va simplement cr√©er un √©l√©ment HTML, souvent des **`<div>`**, et indiquer des classes CSS issues de Bootstrap pour styler ces composants.

Voici un exemple de comment afficher ce composant **Alert** affichant un message de feedback :

<div class="alert alert-primary" role="alert">
  A simple primary alert‚Äîcheck it out!
</div>

Le code associ√© est le suivant :

```html
<div class="alert alert-primary" role="alert">
  A simple primary alert‚Äîcheck it out!
</div>
```

On voit donc que la classe **alert** d√©fini le style globale du message de feedback, et **alert-primary** d√©finit les couleurs (background, texte et bordures).


## <a id="b3"></a>b.3) Le Layout en Bootstrap
En Bootstrap, il y a 12 colonnes disponibles par ligne (12 **col** par **row**).

Le Layout permet notamment d'organiser les contenus d'une page, de d√©finir son squelette.

Admettons que nous souhaitons avoir ce genre de layout :

<div class="container">
  <div class="row">
    <div class="col">
      1 of 2
    </div>
    <div class="col">
      2 of 2
    </div>
  </div>
  <div class="row">
    <div class="col">
      1 of 3
    </div>
    <div class="col">
      2 of 3
    </div>
    <div class="col">
      3 of 3
    </div>
  </div>
</div>

<br/>

Le code associ√© est le suivant :

```html
<div class="container">
  <div class="row">
    <div class="col">
      1 of 2
    </div>
    <div class="col">
      2 of 2
    </div>
  </div>
  <div class="row">
    <div class="col">
      1 of 3
    </div>
    <div class="col">
      2 of 3
    </div>
    <div class="col">
      3 of 3
    </div>
  </div>
</div>
```

Et si l'on souhaitait ajouter une couleur de background et des bordures √† l'aide des **Utilities**, on pourrait le faire avec **.bg-info** et **.border .border-primary** :

<div class="container">
  <div class="row">
    <div class="col bg-info border border-primary">
      1 of 2
    </div>
    <div class="col bg-info border border-primary">
      2 of 2
    </div>
  </div>
  <div class="row">
    <div class="col bg-info border border-primary">
      1 of 3
    </div>
    <div class="col bg-info border border-primary">
      2 of 3
    </div>
    <div class="col bg-info border border-primary">
      3 of 3
    </div>
  </div>
</div>

<br/>

Le code associ√© est le suivant :

```html
<div class="container">
  <div class="row">
    <div class="col bg-info border border-primary">
      1 of 2
    </div>
    <div class="col bg-info border border-primary">
      2 of 2
    </div>
  </div>
  <div class="row">
    <div class="col bg-info border border-primary">
      1 of 3
    </div>
    <div class="col bg-info border border-primary">
      2 of 3
    </div>
    <div class="col bg-info border border-primary">
      3 of 3
    </div>
  </div>
</div>
```


## <a id="b4"></a>b.4) Les breakpoints en Bootstrap
Admettons que nous souhaitons construire une page qui contient un header et un footer : sur toute la largeur de la page, et un body qui lui contient : 
- pour les appareils **large** (‚â•992px) 1 colonne √† gauche de la taille de 2 / 12 pour un menu et une colonne √† droite prenant l'espace restant.
- pour les appareils **extra small** (<576px) jusque **large**, une seule colonne. Ainsi, le menu sera pr√©sent√© sur une 1√®re ligne...

Comment ferions nous cela ?

<div class="container">
  <div class="row">
    <div class="col bg-info border border-primary">
     Header
    </div>   
  </div>
  <div class="row">
    <div class="col-12 col-lg-2 bg-info border border-primary">
     Menu within body part
    </div>   
    <div class="col-12 col-lg bg-info border border-primary">
     Main body part
    </div> 
  </div>
  <div class="row">
    <div class="col bg-info border border-primary">
     Footer
    </div>   
  </div>
</div>

<br/>

Veuillez utiliser le mode d√©veloppeur de votre browser (**F12** par exemple) afin de faire varier la taille de la fen√™tre de votre browser et d'observer le changement au niveau du layout des composants.

Voici le code associ√© :

```html numbered {8,11}
<div class="container">
  <div class="row">
    <div class="col bg-info border border-primary">
     Header
    </div>   
  </div>
  <div class="row">
    <div class="col-12 col-lg-2 bg-info border border-primary">
     Menu within body part
    </div>   
    <div class="col-12 col-lg bg-info border border-primary">
     Main body part
    </div> 
  </div>
  <div class="row">
    <div class="col bg-info border border-primary">
     Footer
    </div>   
  </div>
</div>
```

Via **col-12**, cela signifie que les 12 colonnes disponibles dans une ligne sont prises.

Via **col-lg-2**, on indique que d√®s que l'on √©gale ou d√©passe les 992px, on ne prend que 2/12 d'espace d'une ligne. Notons que **col-lg** prend l'espace restant, on aurait pu indiquer **col-lg-10** pour obtenir le m√™me r√©sultat.

Voici tous les breakpoints par d√©faut offerts par Bootstrap :

| Breakpoint	| Class infix |	Dimensions |
|---|---|---|
| Extra small |	None |	<576px |
| Small	|sm	| ‚â•576px |
| Medium |	md |	‚â•768px |
| Large	| lg	| ‚â•992px |
| Extra large |	xl | ‚â•1200px |
| Extra extra large	| xxl |	‚â•1400px |

<br/>

## <a id="b5"></a>b.5) Les composants Bootstrap
Lorsque vous construisez vos UI, il est pr√©f√©rable de b√©n√©ficier de composants existants au design soign√©. Il en existe de nombreux : **Card**, **Navbar**, **Alert**, **Button**, **Modal**...

Pour les d√©couvrir, allez observer la documentation de [Bootstrap](https://getbootstrap.com/) [[R.36]](/references/#r36).

Pour utiliser certains composants qui offre une interactivit√©, il est n√©cessaire d'inclure le JavaScript associ√©.

Par exemple, afin d'offrir une **Navbar** comme celle-ci :

 <nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dropdown
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><hr class="dropdown-divider"/></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled">Disabled</a>
        </li>
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"/>
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>

<br/>

Il est n√©cessaire de faire l'import suivant, notamment afin que la **Dropdown** s'affiche quand on clique dessus (le reste du code est un copier / coller de la documentation de Bootstrap) : 

```js {1}
import { Navbar } from 'bootstrap';

 <nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dropdown
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><hr class="dropdown-divider"/></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled">Disabled</a>
        </li>
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"/>
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
```

## <a id="b6"></a>b.6) Utilisation de Bootstrap dans un frontend moderne
Nous avons configur√© les boilerplates du cours afin que Bootstrap soit d√©j√† install√©.

Il n'y a donc plus rien √† installer, sauf si p-e vous souhaitez utiliser des ic√¥nes.

Si un jour vous veniez √† devoir installer Bootstrap au sein d'un projet qui utilise un module bundler, vous devriez faire ces manipulations :
- Installation de Bootstrap & de ses d√©pendances : 
```bash
npm i bootstrap @popperjs/core
```
- Chargement du CSS de Bootstrap : 
```js
import 'bootstrap/dist/css/bootstrap.min.css';
```

Et puis finalement, si vous utilisez un composant qui offre des interactions, vous devrez inclure le JS associ√© √† ce composant. Par exemple pour une **Navbar** :
```js
import { Navbar } from 'bootstrap';
```

Nous allons maintenant convertir le style du site de la pizzeria √† l'aide de Bootstrap.  
Reprenez donc au sein de VS Code votre projet **modern**.  
La seule chose que nous allons laisser dans **/src/stylesheets/main.css** est la gestion d'une image en background car Bootstrap ne pr√©voit pas de solution.

Veuillez donc mettre √† jour **/src/stylesheets/main.css** pour ne garder que l'image en background :

```css
body { 
    background-image : url(../img/pizza.jpg);
    background-size : cover;
}
```

Il faut maintenant mettre √† jour **index.html** et indiquer les bonnes classes de Bootstrap :
- **`text-center`** : pour centrer nos titres et le main
- **`text-white font-weight-bold py-2`** : pour le style du texte dans le footer. **`py-2`** met du padding sur l'axe des **y**, est donc tant en haut qu'en bas du footer.
- Pour que le layout de la page fasse toujour, au minimum, la hauteur compl√®te du navigateur et donne l'effet au **`<footer>`** d'√™tre "sticky" en bas de page, on utilise :
  - **`vh-100 d-flex flex-column`** au sein du **`<body>`**.
  - **`flex-grow-1`** dans le **`<main>`** pour lui imposer de remplir l'espace disponible. Ainsi, le footer donne l'effet d'√™tre "sticky" en bas de la page.
- Pour la taille du logo JS, Bootstrap offre des classe pour le **Sizing** en fonction de la taille du parent ou du **viewport** (le browser). Ici, on pr√©f√®re avoir une taille fixe de 50 pixel, donc on va indiquer cette taille directement dans l'attribut **`height`** de **`<img>`**.

Voil√† √† quoi doit ressembler votre **index.html** suite aux changements :

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizzeria</title>
    <link rel="icon" href="./img/pizza-svgrepo-com.svg" type="image/svg+xml" />
  </head>
  <body class="vh-100 d-flex flex-column">
    <header>
      <h1 class="animate__animated animate__bounce text-center">We love Pizza</h1>
    </header>
    <main class="flex-grow-1 text-center">
      <audio id="audioPlayer" controls autoplay>
        <source src="./sound/Infecticide-11-Pizza-Spinoza.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </main>
    <footer class="text-center text-white font-weight-bold py-2">
      <h1 class="animate__animated animate__bounce animate__delay-2s text-center">
        But we also love JS
      </h1>
      <img src="./img/js-logo.png" height="50px" alt="" />
    </footer>
  </body>
</html>
```

Si tout fonctionne bien, faites un commit de votre repo (**web2**) avec le message "**modern-esthetic-hmi**".

En cas de souci, vous pouvez acc√©der au code de cette √©tape du tutoriel ici : [modern-esthetic-hmi](https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/modern-esthetic-hmi).

# <a id="c"></a>c) D√©veloppement d'IHM dynamiques
## <a id="c1"></a>c.1) Introduction
Nous souhaitons parfois g√©n√©rer des parties d'IHM dynamiquement, √† l'aide de JS.

Nous pourrions souhaiter g√©n√©rer de l'HMTL dynamiquement pour plusieurs raisons. Par exemple, si nous souhaiterions afficher diff√©rentes pages sans faire appel au serveur.
Lors d'un clic sur un √©l√©ment d'une Navbar, nous pourrions g√©n√©rer dynamiquement l'HTML de la page associ√©e √† cet √©l√©ment.

Un autre exemple serait l'affichage d'un tableau HTML suite √† la r√©ception de donn√©es envoy√©es par un web service.

Il existe principalement deux fa√ßon de g√©n√©rer des √©l√©ments HTML, soit √† partir de String, soit √† partir de "Nodes" (ou HTML elements).

## <a id="c2"></a>c.2) G√©n√©ration d'HTML √† partir d'une string
Nous pouvons utiliser la propri√©t√© **innerHTML** d'un √©l√©ment existant pour cr√©er de l'HTML √† l'aide d'une String.

Lorsque nous allons ajouter une String √† la propri√©t√© **innerHTML** d'un √©l√©ment, le browser va s'occuper de cr√©er des "Node elements" et les attacher au "DOM tree" au sein de l'√©l√©ment que nous modifions. 

Nous souhaitons ajouter un menu √† notre site de la pizzeria √† g√©n√©rer √† partir d'un array.

Voici le nouveau code √† ajouter pour g√©n√©rer ce menu au sein de **/src/index.js** : 


```js numbered {5-31,37,46-81}
import 'bootstrap/dist/css/bootstrap.min.css';
import './stylesheets/main.css';
import 'animate.css';

const MENU = [
  {
    id: 1,
    title: '4 fromages',
    content: 'Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates',
  },
  {
    id: 2,
    title: 'Vegan',
    content: 'Tomates, Courgettes, Oignons, Aubergines, Poivrons',
  },
  {
    id: 3,
    title: 'Vegetarian',
    content: 'Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives',
  },
  {
    id: 4,
    title: 'Alpage',
    content: 'Gruy√®re, Mozarella, Lardons, Tomates',
  },
  {
    id: 5,
    title: 'Diable',
    content: 'Tomates, Mozarella, Chorizo piquant, Jalapenos',
  },
];

const body = document.querySelector('body');

body.addEventListener('click', startOrStopSound);

renderMenuFromString(MENU);

function startOrStopSound() {
  const myAudioPlayer = document.querySelector('#audioPlayer');

  if (myAudioPlayer.paused) myAudioPlayer.play();
  else myAudioPlayer.pause();
}

function renderMenuFromString(menu) {
  const menuTableAsString = getMenuTableAsString(menu);

  const main = document.querySelector('main');

  main.innerHTML += menuTableAsString;
}

function getMenuTableAsString(menu) {
  const menuTableLines = getAllTableLinesAsString(menu);
  const menuTable = addLinesToTableHeadersAndGet(menuTableLines);
  return menuTable;
}

function addLinesToTableHeadersAndGet(tableLines) {
  const menuTable = `
  <div class="table-responsive pt-5">
    <table class="table table-danger">
      <tr>
        <th>Pizza</th>
        <th>Description</th>
      </tr>
      ${tableLines}    
    </table>
  </div>
  `;
  return menuTable;
}

function getAllTableLinesAsString(menu) {
  let pizzaTableLines = '';

  menu?.forEach((pizza) => {
    pizzaTableLines += `<tr>
      <td>${pizza.title}</td>
      <td>${pizza.content}</td>
    </tr>`;
  });

  return pizzaTableLines;
}
```

Dans un premier temps, nous avons acc√©der √† l'√©l√©ment **main** en tant qu'HTML element (ou Node).

Nous avons ensuite g√©n√©r√© une String multilignes √† l'aide des `template literals` pour repr√©senter le menu, pour finalement ajouter au **main** de nouveaux √©l√©ments en concat√©nant cette String √† sa propri√©t√© **innerHTML**. 

## <a id="c3"></a>c.3) Ajout dynamique d'√©couteurs d'√©v√©nements une fois le DOM rendu

A ce stade-ci, nous souhaiterions ajouter un gestionnaire de passage de souris sur le menu.  
Au passage sur le menu, nous souhaitons changer la couleur du background afin que le menu devienne vert. Lorsqu'on quitte le menu, celle-ci doit reprendre sa couleur initiale.

Voici le code mis √† jour de **index.js** :

```js numbered {39,85-94}
import 'bootstrap/dist/css/bootstrap.min.css';
import './stylesheets/main.css';
import 'animate.css';

const MENU = [
  {
    id: 1,
    title: '4 fromages',
    content: 'Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates',
  },
  {
    id: 2,
    title: 'Vegan',
    content: 'Tomates, Courgettes, Oignons, Aubergines, Poivrons',
  },
  {
    id: 3,
    title: 'Vegetarian',
    content: 'Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives',
  },
  {
    id: 4,
    title: 'Alpage',
    content: 'Gruy√®re, Mozarella, Lardons, Tomates',
  },
  {
    id: 5,
    title: 'Diable',
    content: 'Tomates, Mozarella, Chorizo piquant, Jalapenos',
  },
];

const body = document.querySelector('body');

body.addEventListener('click', startOrStopSound);

renderMenuFromString(MENU);

attachOnMouseEventsToGoGreen();

function startOrStopSound() {
  const myAudioPlayer = document.querySelector('#audioPlayer');

  if (myAudioPlayer.paused) myAudioPlayer.play();
  else myAudioPlayer.pause();
}

function renderMenuFromString(menu) {
  const menuTableAsString = getMenuTableAsString(menu);

  const main = document.querySelector('main');

  main.innerHTML += menuTableAsString;
}

function getMenuTableAsString(menu) {
  const menuTableLines = getAllTableLinesAsString(menu);
  const menuTable = addLinesToTableHeadersAndGet(menuTableLines);
  return menuTable;
}

function addLinesToTableHeadersAndGet(tableLines) {
  const menuTable = `
  <div class="table-responsive pt-5">
    <table class="table table-danger">
      <tr>
        <th>Pizza</th>
        <th>Description</th>
      </tr>
      ${tableLines}    
    </table>
  </div>
  `;
  return menuTable;
}

function getAllTableLinesAsString(menu) {
  let pizzaTableLines = '';

  menu?.forEach((pizza) => {
    pizzaTableLines += `<tr>
      <td>${pizza.title}</td>
      <td>${pizza.content}</td>
    </tr>`;
  });

  return pizzaTableLines;
}

function attachOnMouseEventsToGoGreen() {
  const table = document.querySelector('table');
  table.addEventListener('mouseover', () => {
    table.className = 'table table-success';
  });

  table.addEventListener('mouseout', () => {
    table.className = 'table table-danger';
  });
}
```

Une fois le menu rendu, nous y acc√©dons en obtenant une r√©f√©rence vers le Node repr√©sentant ce menu au sein du DOM tree.

Nous acc√©dons √† l'attribut **class** d'une **table** en modifiant, en JS, l'attribut **className**.  
Il est aussi possible d'affiner la gestion des classes CSS en ajoutant ou supprimant des classes via la propri√©t√© **classList** d'un Node (ou HTML element).

Ici, nous avons utilis√© les classes Bootstrap "table-success" pour mettre en vert, et "table-danger" pour que √ßa soit en rouge.

Il est √† noter ces dangers quand on utilise des Strings pour g√©n√©rer de l'HTML.

### ‚ö° Danger N¬∞1 : oubli de mettre √† jour le DOM avant d'attacher ses √©couteurs

Il arrive tr√®s souvent aux jeunes d√©veloppeurs web de faire une erreur de ce genre.  
Regarder le code d'**index.js** et imaginez que vous attachiez les √©couteurs d'√©v√©nements dans **renderMenuFromString()** et plus apr√®s l'appel de cette fonction :

```js {6}
function renderMenuFromString(menu) {
  const menuTableAsString = getMenuTableAsString(menu);

  const main = document.querySelector('main');

  attachOnMouseEventsToGoGreen();

  main.innerHTML += menuTableAsString;
}
```

Comme la **table** n'a pas √©t√© rendue dans le DOM, il n'est pas possible d'acc√©der √† celle-ci !  
Une exception serait donc lanc√©e dans la console de votre browser.

Tout cela semble logique, mais pensez-y en cas de souci avec vos √©couteurs d'√©v√©nements üòâ.

## ‚ö° Danger N¬∞2 : mise √† jour du DOM apr√®s avoir ajout√© ses √©couteurs

Il arrive aussi r√©guli√®rement aux jeunes d√©veloppeurs web de faire une erreur de ce style.  
Regardez le code d'**index.js** et imaginez que vous souhaitiez ajouter une l√©gende au menu :

```js {5-6}
renderMenuFromString(MENU);

attachOnMouseEventsToGoGreen();

const mainWrapper = document.querySelector('main');
mainWrapper.innerHTML += '<figcaption class="text-light text-decoration-underline">Our pizzas</figcaption>';
```

‚ö° L'update du DOM d'un √©l√©ment fait un reset de tous les √©couteurs d'√©v√©nements pr√©c√©demment attach√©s ! Pensez-y en cas de souci avec vos √©couteurs d'√©v√©nements üòâ.

## <a id="c4"></a>c.4) G√©n√©ration d'HTML √† partir de Nodes
Il est possible de directement cr√©er un Node (ou HTML element) √† l'aide de la m√©thode **`document.createElement()`**.

Une fois un Node cr√©√©, on demande de l'ajouter au "DOM tree" via la m√©thode **`appendChild()`**.

Voici un petit exemple d'ajout d'un titre au **main** :

```js
const mainWrapper = document.querySelector('main');
// Create the child element
const h1 = document.createElement('h1');
// Change its property
h1.innerText = 'Hello World';
// Attach the child element to its parent
mainWrapper.appendChild(h1);
```

Nous souhaitons ajouter un nouveau menu pour les boissons √† notre site de la pizzeria, √† g√©n√©rer √† partir d'un array.

Voici le nouveau code √† ajouter pour g√©n√©rer la liste des boissons au sein de **/src/index.js** : 


```js numbered {33-49,59,121-159}
import 'bootstrap/dist/css/bootstrap.min.css';
import './stylesheets/main.css';
import 'animate.css';

const MENU = [
  {
    id: 1,
    title: '4 fromages',
    content: 'Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates',
  },
  {
    id: 2,
    title: 'Vegan',
    content: 'Tomates, Courgettes, Oignons, Aubergines, Poivrons',
  },
  {
    id: 3,
    title: 'Vegetarian',
    content: 'Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives',
  },
  {
    id: 4,
    title: 'Alpage',
    content: 'Gruy√®re, Mozarella, Lardons, Tomates',
  },
  {
    id: 5,
    title: 'Diable',
    content: 'Tomates, Mozarella, Chorizo piquant, Jalapenos',
  },
];

const DRINKS = [
  {
    id: 1,
    title: 'Lemonade',
    content: 'Sparkling water, lemon, ice cubes',
  },
  {
    id: 2,
    title: 'Ice tea',
    content: 'Mint, ginger, water',
  },
  {
    id: 3,
    title: 'Exotic Kombucha',
    content: 'Mango, Sparkling water, Fermented tea',
  },
];

const body = document.querySelector('body');

body.addEventListener('click', startOrStopSound);

renderMenuFromString(MENU);

attachOnMouseEventsToGoGreen();

renderDrinksFromNodes(DRINKS);

function startOrStopSound() {
  const myAudioPlayer = document.querySelector('#audioPlayer');

  if (myAudioPlayer.paused) myAudioPlayer.play();
  else myAudioPlayer.pause();
}

function renderMenuFromString(menu) {
  const menuTableAsString = getMenuTableAsString(menu);

  const main = document.querySelector('main');

  main.innerHTML += menuTableAsString;
}

function getMenuTableAsString(menu) {
  const menuTableLines = getAllTableLinesAsString(menu);
  const menuTable = addLinesToTableHeadersAndGet(menuTableLines);
  return menuTable;
}

function addLinesToTableHeadersAndGet(tableLines) {
  const menuTable = `
  <div class="table-responsive pt-5">
    <table class="table table-danger">
      <tr>
        <th>Pizza</th>
        <th>Description</th>
      </tr>
      ${tableLines}    
    </table>
  </div>
  `;
  return menuTable;
}

function getAllTableLinesAsString(menu) {
  let pizzaTableLines = '';

  menu?.forEach((pizza) => {
    pizzaTableLines += `<tr>
      <td>${pizza.title}</td>
      <td>${pizza.content}</td>
    </tr>`;
  });

  return pizzaTableLines;
}

function attachOnMouseEventsToGoGreen() {
  const table = document.querySelector('table');
  table.addEventListener('mouseover', () => {
    table.className = 'table table-success';
  });

  table.addEventListener('mouseout', () => {
    table.className = 'table table-danger';
  });
}

function renderDrinksFromNodes(drinks) {
  const drinksTableAsNode = getDrinksTableAsNode(drinks);

  const main = document.querySelector('main');

  main.appendChild(drinksTableAsNode);
}

function getDrinksTableAsNode(drinks) {
  const tableWrapper = document.createElement('div');
  tableWrapper.className = 'table-responsive pt-5';
  const table = document.createElement('table');
  const tbody = document.createElement('tbody');
  table.id = 'table-drinks';
  table.className = 'table table-success';
  tableWrapper.appendChild(table);
  table.appendChild(tbody);
  const header = document.createElement('tr');
  const header1 = document.createElement('th');
  header1.innerText = 'Drink';
  const header2 = document.createElement('th');
  header2.innerText = 'Description';
  header.appendChild(header1);
  header.appendChild(header2);
  tbody.appendChild(header);

  drinks?.forEach((drink) => {
    const line = document.createElement('tr');
    const title = document.createElement('td');
    const description = document.createElement('td');
    title.innerText = drink.title;
    description.innerText = drink.content;
    line.appendChild(title);
    line.appendChild(description);
    tbody.appendChild(line);
  });

  return tableWrapper;
}
```

## <a id="c5"></a>c.5) Ajout dynamique d'√©couteurs d'√©v√©nements avant de rendre le DOM
Lorsque l'on vient de cr√©er un Node, il est possible de directement lui attacher un √©couteur d'√©v√©nements.

Nous souhaiterions ajouter un gestionnaire de passage de souris sur la liste des boissons.  
Au passage sur la liste, nous souhaitons changer la couleur du background afin qu'elle devienne rouge. Lorsqu'on quitte la liste, celle-ci doit reprendre sa couleur initiale.

Voici le code que vous devez ajouter √† la m√©thode **getDrinksTableAsNode()** au sein de **index.js** :

```js numbered {30-36}
function getDrinksTableAsNode(drinks) {
  const tableWrapper = document.createElement('div');
  tableWrapper.className = 'table-responsive pt-5';
  const table = document.createElement('table');
  const tbody = document.createElement('tbody');
  table.id = 'table-drinks';
  table.className = 'table table-success';
  tableWrapper.appendChild(table);
  table.appendChild(tbody);
  const header = document.createElement('tr');
  const header1 = document.createElement('th');
  header1.innerText = 'Drink';
  const header2 = document.createElement('th');
  header2.innerText = 'Description';
  header.appendChild(header1);
  header.appendChild(header2);
  tbody.appendChild(header);

  drinks?.forEach((drink) => {
    const line = document.createElement('tr');
    const title = document.createElement('td');
    const description = document.createElement('td');
    title.innerText = drink.title;
    description.innerText = drink.content;
    line.appendChild(title);
    line.appendChild(description);
    tbody.appendChild(line);
  });

  table.addEventListener('mouseover', () => {
    table.className = 'table table-danger';
  });

  table.addEventListener('mouseout', () => {
    table.className = 'table table-success';
  });

  return tableWrapper;
}
```

Nous avons ajout√© deux √©couteurs d'√©v√©nements √† la **table** en cours de construction.  
Notons que ces √©couteurs peuvent √™tre ajout√©s avant ou apr√®s avoir fait l'ajout de la table dans le "DOM tree", cela ne change rien.

Regardez le code d'**index.js** et imaginez que vous souhaitiez ajouter une l√©gende √† la liste de boissons, en utilisant des Nodes :

```js {3-7}
renderDrinksFromNodes(DRINKS);

const mainWrapper = document.querySelector('main');
const figcaption = document.createElement('figcaption');
figcaption.innerText = 'Our drinks';
figcaption.className = 'text-light text-decoration-underline';
mainWrapper.appendChild(figcaption);
```

Le fait d'ajouter un Node au "DOM tree" ne fait pas de reset des √©couteurs d'√©v√©nements pr√©c√©demment attach√©s ! C'est un avantage √† g√©n√©rer de l'HTML √† partir de Nodes plut√¥t qu'√† partir d'une string.

N'h√©sitez pas √† tester ce morceau de code pour vous rendre compte que la liste de boissons continue √† bien g√©rer les mouvements de la souris.

## <a id="c6"></a>c.6) Ajout dynamique d'images ou d'autres assets 
Lorsque l'on souhaite ajouter une image ou tout autre assets (son, vid√©o...) via du JS et que l'on utilise un module bundler comme Webpack, on ne peut pas juste ajouter une balise **`<image`** avec le chemin en relatif vers celle-ci.

Pourquoi pas ?  Parce qu'en fait, le bundler va s'occuper de copier, et parfois d'optimiser les assets dans le "build", g√©n√©ralement g√©n√©r√© dans le r√©pertoire **/dist** de votre projet.
Ainsi, lorsque vous d√©veloppez votre code, l'image se trouve √† un endroit diff√©rent d'o√π se trouvera l'image lors du build.

Pour bien g√©rer les URL au sein de votre JS, vous devez d'abord importer vos assets.  
Voici un exemple pour ajouter une image dynamiquement au sein du **`<footer>`** : 

```js
import pizzaImage from './src/img/pizza2.png';

renderPizzaImage(pizzaImage);

function renderPizzaImage(pizzaUrl) {
  const image = new Image(); // or document.createElement('img');
  image.src = pizzaUrl;
  image.height = 50;
  const footer = document.querySelector('footer');
  footer.appendChild(image);
}
```

Le type du Asset Module configur√© dans **webpack.config.js** est **'asset/resource'**.  
Cela signifie que pour chaque fichier import√© dans le JS, il sera √©mis dans le "output directory", (ou "build directory"), g√©n√©ralement dans **/dist**, avec comme non de fichier qqch qui ressemble √† un hash (par exemple 151cfcfa1bd74779aadb.png) et leur chemins (paths) seront inject√© dans le bundle.

Dans l'exemple, le chemin de l'image **pizza2.png** lors de l'ex√©cution de l'application sera donn√© dans la variable **pizzaImage**.

Veuillez mettre √† jour votre site de la pizzeria pour afficher cette image dans le footer : <LinkFile name="pizza2.jpg" target="_blank" download>Pizza √† ajouter dans le footer [R.38]</LinkFile>.

Si tout fonctionne bien, faites un **commit** de votre repo (**web2**) avec le message "**modern-dynamic-hmi**".

En cas de souci, vous pouvez acc√©der au code de cette √©tape du tutoriel ici : [modern-dynamic-hmi](https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/modern-dynamic-hmi).

Si vous souhaitez plus d'informations sur la gestion des assets via Webpack, vous pouvez le faire via les [Asset Modules](https://webpack.js.org/guides/asset-modules/) [[R.37]](/references/#r37).


# <a id="d"></a> d) Debbuging d'un frontend tournant sous Webpack
üí≠ Qui est votre meilleur ami ?

Il est possible qu'√† ce stade-ci, vous ignorez une des bonnes r√©ponses, car pour les d√©veloppeurs, le debugger est son meilleur ami !

Le debugger est toujours l√† pour vous, pr√™t √† vous faire voyager pas √† pas dans votre code, √† vous donner des pistes dans les moments difficiles, sans imposer de solutions, il vous offre une libert√© totale !  Et il acceptera toujours votre code tel qu'il est, sous r√©serve bien s√ªr que celui-ci compile.  
C'est exactement ce que l'on attend d'un ami üòÅ.

Le tutoriel qui suit apprend √† d√©bugger un frontend qui est d√©velopp√© en JS et qui utilise Webpack comme module bundler.

<ul className="card mt-3">
    <div className="card__header">Debugging d'un frontend tournant sous Webpack</div>
    <li className="card__content">
      <span className="card__content__title">Tutoriel vid√©o</span>
      <div className="card__content_description">
        <div width="100px" style={{display:"inline-block"}}>
          <YoutubeImage src="https://youtu.be/Fdo7zwhxaf4" />
        </div>
      </div>
    </li>          
    <li className="card__content">
      <span className="card__content__title">Description</span>
      <div className="card__content_description">
        D√©buggez pas √† pas une application en ajoutant des breakpoints, en voyageant pas √† pas dans le code √† l'aide de Chrome et de ses outils de d√©veloppeurs.
      </div>
    </li>
</ul>

<br/>

# <a id="e"></a> e) Exercice 2.1 : Homepage statique de myMovies & Webpack
Vous allez d√©marrer le d√©veloppement d'une application web permettant de partager des informations sur vos films pr√©f√©r√©s. 

Notez que cette application va vous suivre jusqu'√† la fin de ce cours : nous allons la faire √©voluer pour traiter de tous les concepts associ√©s √† ce cours.  
Nous l'appellerons **myMovies**.

Veuillez cr√©er la **Homepage** de votre application **myMovies** en y incluant au minimum deux images et un peu de texte.

Afin de r√©aliser cet exercice nous vous proposons ces contraintes d'impl√©mentation :
-	Utilisez Webpack pour un frontend moderne, en utilisant le [boilerplate de base](https://github.com/e-vinci/js-basic-boilerplate.git) offert dans le cadre du cours.
-	Veuillez cr√©er de l'HTML de mani√®re statique. Pas besoin de g√©rer de JS √† ce stade-ci (**index.js** du boilerplate ne doit pas √™tre compl√©t√©).

Le code de votre application web doit se retrouver dans votre repository local et votre web repository (normalement appel√© **web2**) dans un r√©pertoire nomm√© **/exercises/module2/2.1**.

Veuillez faire un **commit** de votre code avec le message suivant : "**myMovies : bundler**"".

# <a id="f"></a> f) Exercice 2.2 : G√©n√©ration dynamique de la Homepage de myMovies
Faites un refactor de votre application **myMovies** afin de g√©n√©rer dynamiquement l'HTML des images et du texte au chargment d'**index.html**.

Afin de r√©aliser cet exercice nous vous proposons ces contraintes d'impl√©mentation :
-	Utilisez Webpack pour un frontend moderne, en utilisant le code l'exercice pr√©c√©dent (**/exercises/module2/2.1**).
-	Veuillez cr√©er un container statique, ou autrement dit un "wrapper", dans votre page **index.html** (par exemple une balise **main** ou une **div**).
-	Ajoutez dynamique les images et le texte associ√© √† votre **Homepage** dans votre "wrapper".

Veuillez faire un **commit** de votre code avec le message suivant : "**myMovies : module 2 : dynamic homepage**"".

NB : Le code de votre application web se trouve dans votre repository local et votre web repository (normalement appel√© **web2**) dans le r√©pertoire nomm√© **/exercises/module2/2.2**.

# <a id="g"></a> g) Exercice 2.3 : G√©n√©ration dynamique d'une table sur base d'un formulaire
Vous allez r√©aliser une application web permettant de g√©n√©rer des tables sur base d'un formulaire.

Cr√©ez un formulaire permettant d'introduire un nombre de lignes, un nombre de colonne, et une chaine de base.  
Utilisez Bootstrap pour formater votre application web.  
N√©anmoins, si vous √™tes √† l'aise avec une autre technologie, n'h√©sitez pas √† cr√©er votre UI via du Vanilla CSS ou une autre librairie (tailwindcss‚Ä¶).

Voil√† √† quoi pourrait ressembler votre formulaire :

<ScrollableImage name="form.png" minWidth="182px" maxWidth="182px" />

Veuillez valider chacun des champs du formulaire lors du clic sur le bouton.

Si tous les champs sont valid√©s, veuillez g√©n√©rer et afficher une table HTML.   
Voici un exemple de r√©sultat :

<ScrollableImage name="table.png" minWidth="219px" maxWidth="219px" />


Afin de r√©aliser cet exercice nous vous proposons ces contraintes d'impl√©mentation :
-	Cr√©ez une 1√®re fonction qui retourne un **Array** √† deux dimensions avec :
  - comme valeur pour chaque √©l√©ment : une String au format `"chaine de base[num√©ro de ligne][ num√©ro de colonne]"`,
  - sur base de 3 param√®tres : le nombre de lignes, de colonnes, et la chaine de base √† afficher dans chaque √©l√©ment du tableau.
-	Cr√©ez une deuxi√®me fonction qui renvoie, sous forme de string, une table HTML bas√©e sur l'**Array** cr√©√© par la 1√®re fonction.
-	Appelez ces deux fonctions afin d'afficher la table de mani√®re dynamique au sein d'un "wrapper" (une **div** est conseill√©e).


#### ü§ù Tips 
- Vous pouvez utiliser la propri√©t√© **.innerHtml** de votre wrapper pour afficher dynamiquement la table.
- Pour g√©rer le submit d'un formulaire, il existe plusieurs fa√ßon de le faire. La fa√ßon recommand√©e est d'√©couter les √©v√©nements de type "submit" sur le formulaire. Il est ainsi possible de faire un submit d'un formulaire √† l'aide de la touche **Enter**.
- N'oubliez pas que lors d'un clic sur un √©l√©ment qui am√®ne √† un ¬´ submit ¬ª, le comportement par d√©faut du formulaire est de recharger la page. Vous devez donc stopper ce comportement par d√©faut pour assurer que le tableau que vous g√©n√©rez ne soit pas "effac√©".


Le code de votre application web doit se retrouver dans votre repository local et votre web repository (normalement appel√© **web2**) dans un r√©pertoire nomm√© **/exercises/module2/2.3**.

Veuillez faire un **commit** de votre code avec le message suivant : "**Exercice 2.3**"".

## <a id="h"></a> h) üç¨ Exercice 2.4 : design responsive

N'h√©sitez pas √† lib√©rer votre cr√©ativit√© et am√©liorer la UI de la Homepage de **myMovies**.  
Voici quelques id√©es : 	
-	Assurez-vous qu'elle soit design responsive.
-	Pr√©voyez deux layouts : un layout pour les appareils mobile, un autre layout pour les appareils ayant un √©cran moyen voire large.
-	Peaufinez votre favicon, header, footer‚Ä¶
