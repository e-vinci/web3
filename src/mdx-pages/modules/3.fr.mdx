---
title: "Module 3 : Complex state & collections"
description: "Complex state & Rendering collection"
---

# Module 3 : Complex state & collections

Ce module vous offre principalement la gestion d'un √©tat complexe et le rendu de collections.

<InternalPageMenu>
  <PathViewer>
    <PathViewerItem to="/"> web3course </PathViewerItem>
    <PathViewerItem to="/modules/3" selected> Module 3 </PathViewerItem>
  </PathViewer>
  <InternalPageMenuItem> Gestion d'un √©tat plus complexe </InternalPageMenuItem>
  <InternalPageMenuItem> Rendu de collections </InternalPageMenuItem>
  <InternalPageMenuItem> üç¨ Exercise 3.3 : Plus d'entrainements via des anecdotes </InternalPageMenuItem>
  <InternalPageMenuItem> R√©sum√© </InternalPageMenuItem>
  <InternalPageMenuItem> Solution des exercices </InternalPageMenuItem>
</InternalPageMenu>


**Voici les lectures indispensables pour suivre ce module :**
- Gestion d'un √©tat complexe, nouvelle mati√®re : [A more complex state, debugging React apps](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps/) [[R.1]](/references/#r1)
- Rendu de collections, nouvelle mati√®re : [Rendering a collection, modules](https://fullstackopen.com/en/part2/rendering_a_collection_modules#rendering-collections) [[R.1]](/references/#r1)


# <InternalPageTitle> Gestion d'un √©tat plus complexe </InternalPageTitle>

## Bonnes pratiques pour g√©rer un √©tat complexe
Veuillez lire les bonnes pratiques pour g√©rer un √©tat complexe : [A more complex state, debugging React apps](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps/) [[R.1]](/references/#r1).


## Exercice 3.1 : Application React de base

Pour d√©marrer cet exercice, veuillez :
- Dans votre dossier **`/exercises/modules3`** de votre repo local, lancer la commande : **`npm create vite@latest 3.1 -- --template react`**
- Supprimer tout le contenu du dossier **`src/`**.
- Ne pas oublier de supprimer le dossier **`.git`**.
- Copiez le fichier **`jsconfig.json`**, **`vite.config.js`**, **`src/main.js`** et **`src/index.css`** depuis le dossier de l'exercice du module pr√©c√©dent. 

A partir de ce projet, veuillez ensuite faire les exercices **1.6 √† 1.11** de [A more complex state, debugging React apps: Exercises 1.6.-1.14.](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps#exercises-1-6-1-14).

Veuillez faire un **commit** de votre code avec le message suivant : "**module3 : basics**".


## Loading component
Toujours au sein de **`/exercises/module3/3.1`**, continuez l'exercice en :
- cr√©ant un composant **`Loading`** qui va afficher un message de chargement.
- ajoutant un √©tat **`loading`** dans le composant qui va passer de **`true`** √† **`false`** automatiquement gr√¢ce √† un **`setTimeout`** apr√®s 3 secondes.
- affichant le composant de chargement au lieu du feedback & des statistiques dans le cas o√π la variable **`loading`** est √† **`true`**.

Veuillez faire un **commit** de votre code avec le message suivant : "**module3 : loading**".


# <InternalPageTitle> Rendu de collections </InternalPageTitle>
## Bonnes pratiques pour rendre des collections
Veuillez lire les bonnes pratiques concernant le rendu de collections :
- [Rendering a collection, modules](https://fullstackopen.com/en/part2/rendering_a_collection_modules#rendering-collections) [[R.1]](/references/#r1).
- [Key-attribute](https://fullstackopen.com/en/part2/rendering_a_collection_modules#key-attribute)
- [Map](https://fullstackopen.com/en/part2/rendering_a_collection_modules#map)
- [Anti-pattern: Array Indexes as Keys](https://fullstackopen.com/en/part2/rendering_a_collection_modules#anti-pattern-array-indexes-as-keys)


## Exercice 3.2 : rendu d'une collection
Veuillez faire l'exercice 2.1 repris √† la suite de ce que vous venez de lire dans le dossier **`/exercises/module3`** de votre repo local : [Exercise 2.1.](https://fullstackopen.com/en/part2/rendering_a_collection_modules#exercises-2-1-2-5)[[R.1]](/references/#r1).

Pour initialiser cet exercice, nous vous recommandons de cr√©er manuellement le r√©pertoire **`/exercises/module3/3.2`** et d'y copier / coller le contenu du r√©pertoire **`/exercises/module1/1.1-1.2`**, en √©vitant de copier les r√©pertoires `.git/` et `node_modules/`.

Veuillez faire un **commit** de votre code avec le message suivant : "**module3 : collection**".

# <InternalPageTitle> üç¨ Exercise 3.3 : Plus d'entrainements via des anecdotes *(Exercice facultatif, pour les plus motiv√©s)* </InternalPageTitle>

Vous pourriez faire les exercices 1.12 √† 1.14 de la s√©ance lue pr√©c√©demment : [Exercises 1.6.-1.14.](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps#exercises-1-6-1-14) [[R.1]](/references/#r1).

Dans ce cas, faites ces exercices au sein de votre repo local dans le dossier **`/exercises/module3/3.3`**. 

Veuillez faire un **commit** de votre code avec le message suivant : "**module3 : anecdotes**".

# <InternalPageTitle> R√©sum√© </InternalPageTitle>

### Etats

- Un √©tat complexe peut √™tre stock√© sous forme d'un objet JS, mais souvent, il est plus pratique de d√©composer l'√©tat en plus petites parties.
- Ne jamais modifier l'√©tat sans passer par la m√©thode **`setXXX`** retourn√©e pas le **`useState()`**.  
Soyez particuli√®rement attentifs pour des objets ou arrays: une copie doit toujours √™tre fournie au `setXXX()` plut√¥t que l'objet/array initial. Donc pas de `push` ou `pop` mais plut√¥t `slice`, `concat`, etc.
- N'oubliez pas que la modification de la valeur d'un √©tat (hook) se fait toujours de mani√®re asynchrone!
Si vous avez besoin de la nouvelle valeur d'un √©tat *dans une fonction qui le modifie*, stockez-la d'abord dans une variable (`const newValue = value+1` par ex.) puis appelez `setValue(newValue)` et ensuite utilisez `newValue` comme vous le d√©sirez.
- Les hooks (**`useState`** par exemple) ne peuvent jamais √™tre cr√©√©s dans une boucle, une expression conditionnelle... Cr√©ez-les toujours √† la "racine" de la fonction du composant, de sorte √† ce que l'ordre d'appel soit pr√©dictible.

### Event Handlers

- Un event handler doit √™tre une fonction, et pas une expression renvoyant autre chose qu'une fonction. On peut donc aussi mettre dans **`onClick={....}`** un appel de fonction qui renvoie une fonction.
- Ne jamais d√©finir un composant dans un autre composant. React traitera ce composant comme un nouveau √† chaque rendu, ce qui casse l'optimisation des rendus de React.

### Collections

- Sur un array, on peut utilise **`map`** pour "render" chaque √©l√©ment, **`filter`** pour filtrer... Et ce, directement dans le JSX ci-n√©cessaire.
- L'attribut **`key`** est indispensable pour chaque √©l√©ment d'une liste.
- L'attribut **`key`** doit √™tre unique et ne pas changer. D√®s lors, la position dans la liste (`index`) n'est pas une bonne solution.

# <InternalPageTitle> üç¨ Solution des exercices </InternalPageTitle>

Une solution pour les exercices de ce module se trouvent ici : [module3](https://github.com/e-vinci/web3-exercises/tree/main/exercises/module3)

N'h√©sitez pas √† utiliser https://download-directory.github.io/ pour t√©l√©charger le dossier complet (sans devoir cloner tout le repo **`web3-exercises`**). Vous devez juste indiquer le lien vers le dossier **`module3`** dans le champ **`Download Directory`** : https://github.com/e-vinci/web3-exercises/tree/main/exercises/module3 puis taper sur la touche **`Enter`** de votre clavier.
